<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Access data instantly across the globe in your Apps & APIs for exceptional performance and scale. <br> One interface, multiple data models!"><link href=https://macrometa.com/docs/documents/indexing/working-with-indexes/ rel=canonical><meta name=author content=Durga><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.2.1, mkdocs-material-5.4.0"><title>Working with Indexes - Macrometa Docs</title><link rel=stylesheet href=../../../assets/stylesheets/main.7efdba89.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.5447f842.min.css><meta name=theme-color content=#3f51b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#working-with-indexes class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://macrometa.com/docs/ title="Macrometa Docs" class="md-header-nav__button md-logo" aria-label="Macrometa Docs"> <svg width=400 height=400 viewbox="0 0 400 400" fill=none xmlns=http://www.w3.org/2000/svg> <path fill=white d="M395.248 194.382L262.465 175.123C258.36 174.499 256.307 169.773 258.717 166.384L300.569 107.178C303.425 103.076 300.123 98.3504 296.018 98.3504C294.947 98.3504 293.876 98.7071 292.806 99.4204L233.553 141.239C232.571 141.953 231.411 142.309 230.34 142.309C227.753 142.309 225.254 140.437 224.808 137.495L205.533 4.81506C205.086 1.60507 202.499 0 200 0C197.501 0 194.914 1.60507 194.467 4.81506L175.192 137.584C174.746 140.526 172.247 142.399 169.66 142.399C168.589 142.399 167.429 142.042 166.447 141.418L108.533 100.847C107.462 100.134 106.392 99.7771 105.321 99.7771C101.305 99.7771 97.9142 104.503 100.77 108.605L141.371 166.474C143.781 169.862 141.729 174.588 137.624 175.212L4.75181 194.472C-1.58394 195.363 -1.58394 204.547 4.75181 205.528L137.624 224.788C141.729 225.412 143.781 230.138 141.371 233.527L101.305 290.86C98.449 294.873 101.84 299.688 105.856 299.688C106.927 299.688 107.997 299.331 109.068 298.618L166.447 258.582C167.429 257.869 168.589 257.602 169.66 257.602C172.247 257.602 174.746 259.474 175.192 262.416L194.467 395.185C194.914 398.395 197.501 400 200 400C202.499 400 205.086 398.395 205.533 395.185L224.808 262.506C225.254 259.563 227.753 257.691 230.34 257.691C231.411 257.691 232.571 258.047 233.553 258.761L292.806 300.491C293.876 301.293 294.947 301.561 296.018 301.561C300.123 301.561 303.425 296.745 300.569 292.733L258.717 233.616C256.307 230.228 258.36 225.502 262.465 224.877L395.248 205.618C401.584 204.548 401.584 195.363 395.248 194.382Z"/> </svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Macrometa Docs </span> <span class="md-header-nav__topic md-ellipsis"> Working with Indexes </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/Macrometacorp/docs/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../quickstart/ class=md-tabs__link> Essentials </a> </li> <li class=md-tabs__item> <a href=../../../keyvalue/quickstart/ class=md-tabs__link> Collections </a> </li> <li class=md-tabs__item> <a href=../../../search/Overview/ class=md-tabs__link> Search </a> </li> <li class=md-tabs__item> <a href=../../../restql/concepts/ class=md-tabs__link> Query Workers </a> </li> <li class=md-tabs__item> <a href=../../../streams/quickstart/ class=md-tabs__link> Streams </a> </li> <li class=md-tabs__item> <a href=../../../cep/quickstart/ class=md-tabs__link> Stream Workers </a> </li> <li class=md-tabs__item> <a href=../../../c8ql/introduction/ class=md-tabs__link> C8 Query Language </a> </li> <li class=md-tabs__item> <a href=../../../demos/address-book/ class=md-tabs__link> Demos & Tutorials </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://macrometa.com/docs/ title="Macrometa Docs" class="md-nav__button md-logo" aria-label="Macrometa Docs"> <svg width=400 height=400 viewbox="0 0 400 400" fill=none xmlns=http://www.w3.org/2000/svg> <path fill=white d="M395.248 194.382L262.465 175.123C258.36 174.499 256.307 169.773 258.717 166.384L300.569 107.178C303.425 103.076 300.123 98.3504 296.018 98.3504C294.947 98.3504 293.876 98.7071 292.806 99.4204L233.553 141.239C232.571 141.953 231.411 142.309 230.34 142.309C227.753 142.309 225.254 140.437 224.808 137.495L205.533 4.81506C205.086 1.60507 202.499 0 200 0C197.501 0 194.914 1.60507 194.467 4.81506L175.192 137.584C174.746 140.526 172.247 142.399 169.66 142.399C168.589 142.399 167.429 142.042 166.447 141.418L108.533 100.847C107.462 100.134 106.392 99.7771 105.321 99.7771C101.305 99.7771 97.9142 104.503 100.77 108.605L141.371 166.474C143.781 169.862 141.729 174.588 137.624 175.212L4.75181 194.472C-1.58394 195.363 -1.58394 204.547 4.75181 205.528L137.624 224.788C141.729 225.412 143.781 230.138 141.371 233.527L101.305 290.86C98.449 294.873 101.84 299.688 105.856 299.688C106.927 299.688 107.997 299.331 109.068 298.618L166.447 258.582C167.429 257.869 168.589 257.602 169.66 257.602C172.247 257.602 174.746 259.474 175.192 262.416L194.467 395.185C194.914 398.395 197.501 400 200 400C202.499 400 205.086 398.395 205.533 395.185L224.808 262.506C225.254 259.563 227.753 257.691 230.34 257.691C231.411 257.691 232.571 258.047 233.553 258.761L292.806 300.491C293.876 301.293 294.947 301.561 296.018 301.561C300.123 301.561 303.425 296.745 300.569 292.733L258.717 233.616C256.307 230.228 258.36 225.502 262.465 224.877L395.248 205.618C401.584 204.548 401.584 195.363 395.248 194.382Z"/> </svg> </a> Macrometa Docs </label> <div class=md-nav__source> <a href=https://github.com/Macrometacorp/docs/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Essentials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Essentials data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Essentials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/ title=Quickstart class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../../essentials/ title=Essentials class=md-nav__link> Essentials </a> </li> <li class=md-nav__item> <a href=../../../authentication/ title=Authentication class=md-nav__link> Authentication </a> </li> <li class=md-nav__item> <a href=../../../geofabrics/ title=GeoFabrics class=md-nav__link> GeoFabrics </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../quotas/ title="Quotas and Limits" class=md-nav__link> Quotas and Limits </a> </li> <li class=md-nav__item> <a href=../../../apikeys/ title=Drivers class=md-nav__link> Drivers </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-8 type=checkbox id=nav-2-8> <label class=md-nav__link for=nav-2-8> Command Line Interface <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Command Line Interface" data-md-level=2> <label class=md-nav__title for=nav-2-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Command Line Interface </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gdnsl/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gdnsl/commands/ title=Commands class=md-nav__link> Commands </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../credits/ title=Credits class=md-nav__link> Credits </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Collections <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Collections data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Collections </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1 type=checkbox id=nav-3-1> <label class=md-nav__link for=nav-3-1> Key Value <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Key Value" data-md-level=2> <label class=md-nav__title for=nav-3-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Key Value </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../keyvalue/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1-2 type=checkbox id=nav-3-1-2> <label class=md-nav__link for=nav-3-1-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=nav-3-1-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../keyvalue/tutorials/using-rest-api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../../keyvalue/tutorials/bulk-update-restql/ title="Bulk Update with RestQL" class=md-nav__link> Bulk Update with RestQL </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2 checked> <label class=md-nav__link for=nav-3-2> Documents <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Documents data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Documents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-2 type=checkbox id=nav-3-2-2> <label class=md-nav__link for=nav-3-2-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=nav-3-2-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../tutorials/working-with-documents/ title="Working with Documents" class=md-nav__link> Working with Documents </a> </li> <li class=md-nav__item> <a href=../../tutorials/bulk-update-restql/ title="Bulk Update with RestQL" class=md-nav__link> Bulk Update with RestQL </a> </li> <li class=md-nav__item> <a href=../../tutorials/using-realtime-updates/ title="Realtime Updates" class=md-nav__link> Realtime Updates </a> </li> <li class=md-nav__item> <a href=../../tutorials/maps_sets_sortedsets/ title="Maps, Sets, SortedSets" class=md-nav__link> Maps, Sets, SortedSets </a> </li> <li class=md-nav__item> <a href=../../../c8ql/c8ql-tutorial/ title="C8QL Tutorial" class=md-nav__link> C8QL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-3 type=checkbox id=nav-3-2-3 checked> <label class=md-nav__link for=nav-3-2-3> Indexing <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Indexing data-md-level=3> <label class=md-nav__title for=nav-3-2-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Indexing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../index-basics/ title="Index Basics" class=md-nav__link> Index Basics </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Working with Indexes <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Working with Indexes" class="md-nav__link md-nav__link--active"> Working with Indexes </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#indexing-attributes-sub-attributes class=md-nav__link> Indexing Attributes &amp; Sub-Attributes </a> </li> <li class=md-nav__item> <a href=#indexing-array-values class=md-nav__link> Indexing Array Values </a> </li> <li class=md-nav__item> <a href=#persistent-indexes class=md-nav__link> Persistent Indexes </a> <nav class=md-nav aria-label="Persistent Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#accessing-persistent-indexes class=md-nav__link> Accessing Persistent Indexes </a> </li> <li class=md-nav__item> <a href=#query-by-example class=md-nav__link> Query by example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ttl-time-to-live-indexes class=md-nav__link> TTL (time-to-live) Indexes </a> <nav class=md-nav aria-label="TTL (time-to-live) Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction_1 class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#removing-documents-at-a-fixed-period-after-creation-update class=md-nav__link> Removing documents at a fixed period after creation / update </a> </li> <li class=md-nav__item> <a href=#removing-documents-at-certain-points-in-time class=md-nav__link> Removing documents at certain points in time </a> </li> <li class=md-nav__item> <a href=#format-of-datetime-values class=md-nav__link> Format of date/time values </a> </li> <li class=md-nav__item> <a href=#preventing-documents-from-being-removed class=md-nav__link> Preventing documents from being removed </a> </li> <li class=md-nav__item> <a href=#limitations class=md-nav__link> Limitations </a> </li> <li class=md-nav__item> <a href=#accessing-ttl-indexes class=md-nav__link> Accessing TTL Indexes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fulltext-indexes class=md-nav__link> Fulltext Indexes </a> <nav class=md-nav aria-label="Fulltext Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction_2 class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#accessing-fulltext-indexes class=md-nav__link> Accessing Fulltext Indexes </a> </li> <li class=md-nav__item> <a href=#fulltext-c8ql-functions class=md-nav__link> Fulltext C8QL Functions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geo-spatial-indexes class=md-nav__link> Geo-Spatial Indexes </a> <nav class=md-nav aria-label="Geo-Spatial Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#geojson-mode class=md-nav__link> GeoJSON Mode </a> </li> <li class=md-nav__item> <a href=#non-geojson-mode class=md-nav__link> Non-GeoJSON mode </a> </li> <li class=md-nav__item> <a href=#indexed-geospatial-queries class=md-nav__link> Indexed GeoSpatial Queries </a> <nav class=md-nav aria-label="Indexed GeoSpatial Queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#query-for-results-near-origin-near-type-query class=md-nav__link> Query for Results near Origin (NEAR type query) </a> </li> <li class=md-nav__item> <a href=#query-for-sorted-results-near-origin-near-type-query class=md-nav__link> Query for Sorted Results near Origin (NEAR type query) </a> </li> <li class=md-nav__item> <a href=#query-for-results-within-distance class=md-nav__link> Query for Results within Distance </a> </li> <li class=md-nav__item> <a href=#query-for-results-contained-in-polygon class=md-nav__link> Query for Results contained in Polygon </a> </li> <li class=md-nav__item> <a href=#query-for-results-intersecting-a-polygon class=md-nav__link> Query for Results Intersecting a Polygon </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geojson class=md-nav__link> GeoJSON </a> <nav class=md-nav aria-label=GeoJSON> <ul class=md-nav__list> <li class=md-nav__item> <a href=#point class=md-nav__link> Point </a> </li> <li class=md-nav__item> <a href=#multipoint class=md-nav__link> MultiPoint </a> </li> <li class=md-nav__item> <a href=#linestring class=md-nav__link> LineString </a> </li> <li class=md-nav__item> <a href=#multilinestring class=md-nav__link> MultiLineString </a> </li> <li class=md-nav__item> <a href=#polygon class=md-nav__link> Polygon </a> </li> <li class=md-nav__item> <a href=#multipolygon class=md-nav__link> MultiPolygon </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vertex-centric-indexes class=md-nav__link> Vertex centric indexes </a> </li> <li class=md-nav__item> <a href=#index-identifiers-handles class=md-nav__link> Index Identifiers &amp; Handles </a> </li> <li class=md-nav__item> <a href=#collection-methods class=md-nav__link> Collection Methods </a> </li> <li class=md-nav__item> <a href=#geofabric-methods class=md-nav__link> GeoFabric Methods </a> </li> <li class=md-nav__item> <a href=#creating-indexes-in-background class=md-nav__link> Creating Indexes in Background </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../index-utilization/ title="Index Utilization" class=md-nav__link> Index Utilization </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-4 type=checkbox id=nav-3-2-4> <label class=md-nav__link for=nav-3-2-4> GeoSpatial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=GeoSpatial data-md-level=3> <label class=md-nav__title for=nav-3-2-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> GeoSpatial </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../geospatial/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class=md-nav__item> <a href=../../../geospatial/tutorial/ title=Tutorial class=md-nav__link> Tutorial </a> </li> <li class=md-nav__item> <a href=#geo-spatial-indexes title=Indexes class=md-nav__link> Indexes </a> </li> <li class=md-nav__item> <a href=../../../c8ql/c8ql-tutorial/ title="C8QL Tutorial" class=md-nav__link> C8QL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> DynamoMode <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=DynamoMode data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> DynamoMode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dynamo/using-aws-cli/ title="Using AWS Console CLI" class=md-nav__link> Using AWS Console CLI </a> </li> <li class=md-nav__item> <a href=../../../dynamo/using-aws-js-browser/ title="AWS Javascript SDK (browser)" class=md-nav__link> AWS Javascript SDK (browser) </a> </li> <li class=md-nav__item> <a href=../../../dynamo/using-aws-js-nodejs/ title="AWS Javascript SDK (nodejs)" class=md-nav__link> AWS Javascript SDK (nodejs) </a> </li> <li class=md-nav__item> <a href=../../../dynamo/using-aws-boto3/ title="AWS Python SDK" class=md-nav__link> AWS Python SDK </a> </li> <li class=md-nav__item> <a href=../../../dynamo/using-mmdynamo-browser/ title="mmdynamo Javascript SDK (browser)" class=md-nav__link> mmdynamo Javascript SDK (browser) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> Graphs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Graphs data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Graphs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../graphs/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../../graphs/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4-3 type=checkbox id=nav-3-4-3> <label class=md-nav__link for=nav-3-4-3> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=nav-3-4-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../graphs/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../../graphs/tutorials/graph-queries/ title="Graph Queries" class=md-nav__link> Graph Queries </a> </li> <li class=md-nav__item> <a href=../../../c8ql/c8ql-tutorial/ title="C8QL Tutorial" class=md-nav__link> C8QL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Search <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Search data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Search </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../search/Overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../search/Views/ title=Views class=md-nav__link> Views </a> </li> <li class=md-nav__item> <a href=../../../search/Analyzers/ title=Analyzers class=md-nav__link> Analyzers </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class=md-nav__link for=nav-4-4> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-4-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../../c8ql/c8ql-tutorial/ title="C8QL Tutorial" class=md-nav__link> C8QL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Query Workers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Query Workers" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Query Workers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../restql/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-5-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../restql/tutorial/ title="RestQL Tutorial" class=md-nav__link> RestQL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/c8ql-tutorial/ title="C8QL Tutorial" class=md-nav__link> C8QL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Streams <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Streams data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Streams </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../streams/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../../streams/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-3 type=checkbox id=nav-6-3> <label class=md-nav__link for=nav-6-3> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-6-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../streams/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../../streams/tutorials/pub-sub-streams/ title="Pub-Sub with Streams" class=md-nav__link> Pub-Sub with Streams </a> </li> <li class=md-nav__item> <a href=../../../streams/tutorials/using-realtime-updates/ title="Realtime Updates" class=md-nav__link> Realtime Updates </a> </li> <li class=md-nav__item> <a href=../../../streams/tutorials/integrating-plugins/ title="Integrating Plugins" class=md-nav__link> Integrating Plugins </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Stream Workers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Stream Workers" data-md-level=1> <label class=md-nav__title for=nav-7> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Stream Workers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cep/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-2 type=checkbox id=nav-7-2> <label class=md-nav__link for=nav-7-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-7-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cep/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/create-stream-app/ title="Create Stream App" class=md-nav__link> Create Stream App </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/consuming-data/ title="Consuming Data" class=md-nav__link> Consuming Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/transforming-data/ title="Transforming Data" class=md-nav__link> Transforming Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/enriching-data/ title="Enriching Data" class=md-nav__link> Enriching Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/filtering-data/ title="Filtering Data" class=md-nav__link> Filtering Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/summarizing-data/ title="Summarizing Data" class=md-nav__link> Summarizing Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/correlating-data/ title="Correlating Data" class=md-nav__link> Correlating Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/publishing-data/ title="Publishing Data" class=md-nav__link> Publishing Data </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/executing-scripts/ title="Executing Scripts" class=md-nav__link> Executing Scripts </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3 type=checkbox id=nav-7-3> <label class=md-nav__link for=nav-7-3> Reference <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Reference data-md-level=2> <label class=md-nav__title for=nav-7-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cep/reference/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/basics/ title=Basics class=md-nav__link> Basics </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/values-n-types/ title="Values & Types" class=md-nav__link> Values & Types </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/data-cleansing/ title="Data Cleansing" class=md-nav__link> Data Cleansing </a> </li> <li class=md-nav__item> <a href=../../../cep/tutorials/enriching-data/ title="Enriching Data" class=md-nav__link> Enriching Data </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/data-transformation/ title="Data Transformations" class=md-nav__link> Data Transformations </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/data-summarization/ title="Data Summarizations" class=md-nav__link> Data Summarizations </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/patterns-n-trends/ title="Patterns & Trends" class=md-nav__link> Patterns & Trends </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/data-pipelining/ title="Data Pipelines" class=md-nav__link> Data Pipelines </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/error-handling/ title="Error Handling" class=md-nav__link> Error Handling </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/geospatial/ title=GeoSpatial class=md-nav__link> GeoSpatial </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/query-guide/ title="Query Guide" class=md-nav__link> Query Guide </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/functions/ title=Functions class=md-nav__link> Functions </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/limits/ title=Limits class=md-nav__link> Limits </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/query-language-update/ title="Query Language Syntax Update" class=md-nav__link> Query Language Syntax Update </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-16 type=checkbox id=nav-7-3-16> <label class=md-nav__link for=nav-7-3-16> Extensions <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Extensions data-md-level=3> <label class=md-nav__title for=nav-7-3-16> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-16-1 type=checkbox id=nav-7-3-16-1> <label class=md-nav__link for=nav-7-3-16-1> Execution <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Execution data-md-level=4> <label class=md-nav__title for=nav-7-3-16-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Execution </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/context/ title=Context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/map/ title=Map class=md-nav__link> Map </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/json/ title=Json class=md-nav__link> Json </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/list/ title=List class=md-nav__link> List </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/math/ title=Math class=md-nav__link> Math </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/reorder/ title=Reorder class=md-nav__link> Reorder </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/time/ title=Time class=md-nav__link> Time </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/unique/ title=Unique class=md-nav__link> Unique </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/execution/streamingml/ title="Streaming ML" class=md-nav__link> Streaming ML </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-16-2 type=checkbox id=nav-7-3-16-2> <label class=md-nav__link for=nav-7-3-16-2> Connectors <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Connectors data-md-level=4> <label class=md-nav__title for=nav-7-3-16-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Connectors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cep/reference/extensions/io/http/ title=HTTP class=md-nav__link> HTTP </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/io/gcp-pubsub/ title="Google Pub-Sub" class=md-nav__link> Google Pub-Sub </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/io/s3/ title="AWS S3" class=md-nav__link> AWS S3 </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/io/kafka/ title=Kafka class=md-nav__link> Kafka </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-16-3 type=checkbox id=nav-7-3-16-3> <label class=md-nav__link for=nav-7-3-16-3> Format Mappers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Format Mappers" data-md-level=4> <label class=md-nav__title for=nav-7-3-16-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Format Mappers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cep/reference/extensions/mappers/json/ title=Json class=md-nav__link> Json </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/mappers/csv/ title=CSV class=md-nav__link> CSV </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/mappers/keyvalue/ title=Key-Value class=md-nav__link> Key-Value </a> </li> <li class=md-nav__item> <a href=../../../cep/reference/extensions/mappers/text/ title=Text class=md-nav__link> Text </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> C8 Query Language <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="C8 Query Language" data-md-level=1> <label class=md-nav__title for=nav-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> C8 Query Language </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../c8ql/introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../c8ql/c8ql-tutorial/ title="C8QL Tutorial" class=md-nav__link> C8QL Tutorial </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/ title="Additional Examples" class=md-nav__link> Additional Examples </a> </li> <li class=md-nav__item> <a href=../../../c8ql/coming-from-sql/ title="Coming from SQL" class=md-nav__link> Coming from SQL </a> </li> <li class=md-nav__item> <a href=../../../c8ql/fundamentals/ title=Fundamentals class=md-nav__link> Fundamentals </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operators/ title=Operators class=md-nav__link> Operators </a> </li> <li class=md-nav__item> <a href=../../../c8ql/data-queries/ title="Data Queries" class=md-nav__link> Data Queries </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-8 type=checkbox id=nav-8-8> <label class=md-nav__link for=nav-8-8> Examples <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Examples data-md-level=2> <label class=md-nav__title for=nav-8-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../c8ql/examples/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/counting/ title=Counting class=md-nav__link> Counting </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/data-modification-queries/ title="Date Modification Queries" class=md-nav__link> Date Modification Queries </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/diffing-documents/ title="Diffing Documents" class=md-nav__link> Diffing Documents </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/dynamic-attribute-names/ title="Dynamic Attribute Names" class=md-nav__link> Dynamic Attribute Names </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/grouping/ title=Grouping class=md-nav__link> Grouping </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/joins/ title=Joins class=md-nav__link> Joins </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/multiple-path-search/ title="Multiple Path Search" class=md-nav__link> Multiple Path Search </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/projections-and-filters/ title="Projections and Filters" class=md-nav__link> Projections and Filters </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/queries-without-collections/ title="Queries Without Collections" class=md-nav__link> Queries Without Collections </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/remove-vertex/ title="Remove Vertex" class=md-nav__link> Remove Vertex </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/subqueries/ title=Sub-Queries class=md-nav__link> Sub-Queries </a> </li> <li class=md-nav__item> <a href=../../../c8ql/examples/traversals/ title=Traversals class=md-nav__link> Traversals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-9 type=checkbox id=nav-8-9> <label class=md-nav__link for=nav-8-9> Operations <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Operations data-md-level=2> <label class=md-nav__title for=nav-8-9> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../c8ql/operations/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/for/ title=FOR class=md-nav__link> FOR </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/return/ title=RETURN class=md-nav__link> RETURN </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/filter/ title=FILTER class=md-nav__link> FILTER </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/search/ title=SEARCH class=md-nav__link> SEARCH </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/sort/ title=SORT class=md-nav__link> SORT </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/limit/ title=LIMIT class=md-nav__link> LIMIT </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/let/ title=LET class=md-nav__link> LET </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/collect/ title=COLLECT class=md-nav__link> COLLECT </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/remove/ title=REMOVE class=md-nav__link> REMOVE </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/update/ title=UPDATE class=md-nav__link> UPDATE </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/replace/ title=REPLACE class=md-nav__link> REPLACE </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/insert/ title=INSERT class=md-nav__link> INSERT </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/upsert/ title=UPSERT class=md-nav__link> UPSERT </a> </li> <li class=md-nav__item> <a href=../../../c8ql/operations/with/ title=WITH class=md-nav__link> WITH </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-10 type=checkbox id=nav-8-10> <label class=md-nav__link for=nav-8-10> Functions <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Functions data-md-level=2> <label class=md-nav__title for=nav-8-10> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../c8ql/functions/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/string/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/numeric/ title=Numeric class=md-nav__link> Numeric </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/date/ title=Date class=md-nav__link> Date </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/array/ title=Array class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/document/ title=Document class=md-nav__link> Document </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/geo/ title=Geo class=md-nav__link> Geo </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/fulltext/ title=Fulltext class=md-nav__link> Fulltext </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/search/ title=Search class=md-nav__link> Search </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/miscellaneous/ title=Miscellaneous class=md-nav__link> Miscellaneous </a> </li> <li class=md-nav__item> <a href=../../../c8ql/functions/type-cast/ title="Type Check & Cast" class=md-nav__link> Type Check & Cast </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-11 type=checkbox id=nav-8-11> <label class=md-nav__link for=nav-8-11> Graphs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Graphs data-md-level=2> <label class=md-nav__title for=nav-8-11> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Graphs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../c8ql/graphs/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../c8ql/graphs/shortest-path/ title="Shortest Path" class=md-nav__link> Shortest Path </a> </li> <li class=md-nav__item> <a href=../../../c8ql/graphs/k-shortest-paths/ title="K Shortest Paths" class=md-nav__link> K Shortest Paths </a> </li> <li class=md-nav__item> <a href=../../../c8ql/graphs/traversals/ title=Traversals class=md-nav__link> Traversals </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../c8ql/array-operators/ title="Array Operators" class=md-nav__link> Array Operators </a> </li> <li class=md-nav__item> <a href=../../../c8ql/common-errors/ title="Common Errors" class=md-nav__link> Common Errors </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> Demos & Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Demos & Tutorials" data-md-level=1> <label class=md-nav__title for=nav-9> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Demos & Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../demos/address-book/ title="Address Book" class=md-nav__link> Address Book </a> </li> <li class=md-nav__item> <a href=../../../demos/crypto-trading/ title="Crypto Trading" class=md-nav__link> Crypto Trading </a> </li> <li class=md-nav__item> <a href=../../../demos/ott-app/ title="OTT App" class=md-nav__link> OTT App </a> </li> <li class=md-nav__item> <a href=../../../demos/realtime-log-analytics/ title="Realtime Log Analytics" class=md-nav__link> Realtime Log Analytics </a> </li> <li class=md-nav__item> <a href=../../../demos/posthog/ title="PostHog Analytics Integration" class=md-nav__link> PostHog Analytics Integration </a> </li> <li class=md-nav__item> <a href=../../../demos/data-privacy-sf/ title="Salesforce Edge Caching & Privacy" class=md-nav__link> Salesforce Edge Caching & Privacy </a> </li> <li class=md-nav__item> <a href=../../../demos/data-privacy/ title="Data Privacy" class=md-nav__link> Data Privacy </a> </li> <li class=md-nav__item> <a href=../../../demos/cf-bookstore/ title=Bookstore class=md-nav__link> Bookstore </a> </li> <li class=md-nav__item> <a href=../../../demos/cf-forever42/ title="Forever 42" class=md-nav__link> Forever 42 </a> </li> <li class=md-nav__item> <a href=../../../demos/fashion-store/ title="Fashion store and Fashion Store Dynamo" class=md-nav__link> Fashion store and Fashion Store Dynamo </a> </li> <li class=md-nav__item> <a href=../../../demos/fleet-management/ title="Fleet Management" class=md-nav__link> Fleet Management </a> </li> <li class=md-nav__item> <a href=../../../demos/realtime-stream-etl/ title="RT Stream ETL" class=md-nav__link> RT Stream ETL </a> </li> <li class=md-nav__item> <a href=../../../demos/realtime-data-distribution/ title="RT Data Distribution (Event Hub)" class=md-nav__link> RT Data Distribution (Event Hub) </a> </li> <li class=md-nav__item> <a href=../../../demos/streamlit-oxford/ title="Oxford Economics" class=md-nav__link> Oxford Economics </a> </li> <li class=md-nav__item> <a href=../../../demos/credit-card-fraud/ title="Credit Card Fraud" class=md-nav__link> Credit Card Fraud </a> </li> <li class=md-nav__item> <a href=../../../demos/jamstack-gatsby/ title="Polling App (Gatsby)" class=md-nav__link> Polling App (Gatsby) </a> </li> <li class=md-nav__item> <a href=../../../demos/cloudflare-workers/ title="Working with Cloudflare Workers" class=md-nav__link> Working with Cloudflare Workers </a> </li> <li class=md-nav__item> <a href=../../../demos/todo-app-cfworkers/ title="ToDo App (CloudFlare)" class=md-nav__link> ToDo App (CloudFlare) </a> </li> <li class=md-nav__item> <a href=../../../demos/dynamo/ title="Dynamo Mode" class=md-nav__link> Dynamo Mode </a> </li> <li class=md-nav__item> <a href=../../../demos/c8ql-examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#indexing-attributes-sub-attributes class=md-nav__link> Indexing Attributes &amp; Sub-Attributes </a> </li> <li class=md-nav__item> <a href=#indexing-array-values class=md-nav__link> Indexing Array Values </a> </li> <li class=md-nav__item> <a href=#persistent-indexes class=md-nav__link> Persistent Indexes </a> <nav class=md-nav aria-label="Persistent Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#accessing-persistent-indexes class=md-nav__link> Accessing Persistent Indexes </a> </li> <li class=md-nav__item> <a href=#query-by-example class=md-nav__link> Query by example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ttl-time-to-live-indexes class=md-nav__link> TTL (time-to-live) Indexes </a> <nav class=md-nav aria-label="TTL (time-to-live) Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction_1 class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#removing-documents-at-a-fixed-period-after-creation-update class=md-nav__link> Removing documents at a fixed period after creation / update </a> </li> <li class=md-nav__item> <a href=#removing-documents-at-certain-points-in-time class=md-nav__link> Removing documents at certain points in time </a> </li> <li class=md-nav__item> <a href=#format-of-datetime-values class=md-nav__link> Format of date/time values </a> </li> <li class=md-nav__item> <a href=#preventing-documents-from-being-removed class=md-nav__link> Preventing documents from being removed </a> </li> <li class=md-nav__item> <a href=#limitations class=md-nav__link> Limitations </a> </li> <li class=md-nav__item> <a href=#accessing-ttl-indexes class=md-nav__link> Accessing TTL Indexes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fulltext-indexes class=md-nav__link> Fulltext Indexes </a> <nav class=md-nav aria-label="Fulltext Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction_2 class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#accessing-fulltext-indexes class=md-nav__link> Accessing Fulltext Indexes </a> </li> <li class=md-nav__item> <a href=#fulltext-c8ql-functions class=md-nav__link> Fulltext C8QL Functions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geo-spatial-indexes class=md-nav__link> Geo-Spatial Indexes </a> <nav class=md-nav aria-label="Geo-Spatial Indexes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#geojson-mode class=md-nav__link> GeoJSON Mode </a> </li> <li class=md-nav__item> <a href=#non-geojson-mode class=md-nav__link> Non-GeoJSON mode </a> </li> <li class=md-nav__item> <a href=#indexed-geospatial-queries class=md-nav__link> Indexed GeoSpatial Queries </a> <nav class=md-nav aria-label="Indexed GeoSpatial Queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#query-for-results-near-origin-near-type-query class=md-nav__link> Query for Results near Origin (NEAR type query) </a> </li> <li class=md-nav__item> <a href=#query-for-sorted-results-near-origin-near-type-query class=md-nav__link> Query for Sorted Results near Origin (NEAR type query) </a> </li> <li class=md-nav__item> <a href=#query-for-results-within-distance class=md-nav__link> Query for Results within Distance </a> </li> <li class=md-nav__item> <a href=#query-for-results-contained-in-polygon class=md-nav__link> Query for Results contained in Polygon </a> </li> <li class=md-nav__item> <a href=#query-for-results-intersecting-a-polygon class=md-nav__link> Query for Results Intersecting a Polygon </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geojson class=md-nav__link> GeoJSON </a> <nav class=md-nav aria-label=GeoJSON> <ul class=md-nav__list> <li class=md-nav__item> <a href=#point class=md-nav__link> Point </a> </li> <li class=md-nav__item> <a href=#multipoint class=md-nav__link> MultiPoint </a> </li> <li class=md-nav__item> <a href=#linestring class=md-nav__link> LineString </a> </li> <li class=md-nav__item> <a href=#multilinestring class=md-nav__link> MultiLineString </a> </li> <li class=md-nav__item> <a href=#polygon class=md-nav__link> Polygon </a> </li> <li class=md-nav__item> <a href=#multipolygon class=md-nav__link> MultiPolygon </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vertex-centric-indexes class=md-nav__link> Vertex centric indexes </a> </li> <li class=md-nav__item> <a href=#index-identifiers-handles class=md-nav__link> Index Identifiers &amp; Handles </a> </li> <li class=md-nav__item> <a href=#collection-methods class=md-nav__link> Collection Methods </a> </li> <li class=md-nav__item> <a href=#geofabric-methods class=md-nav__link> GeoFabric Methods </a> </li> <li class=md-nav__item> <a href=#creating-indexes-in-background class=md-nav__link> Creating Indexes in Background </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Macrometacorp/docs/edit/master/docs/documents/indexing/working-with-indexes.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=working-with-indexes>Working with Indexes<a class=headerlink href=#working-with-indexes title="Permanent link">&para;</a></h1> <h2 id=indexing-attributes-sub-attributes>Indexing Attributes &amp; Sub-Attributes<a class=headerlink href=#indexing-attributes-sub-attributes title="Permanent link">&para;</a></h2> <p>Top-level as well as nested attributes can be indexed. For attributes at the top level, the attribute names alone are required. To index a single field, pass an array with a single element (string of the attribute key) to the <em>fields</em> parameter of the ensureIndex() method. </p> <p>To create an index:</p> <div class=highlight><pre><span></span><code>curl -X POST &quot;https://api-gdn.eng.macrometa.io/_fabric/_system/_api/index/hash?collection=c1&quot; 
-H &quot;Authorization: bearer &lt;token&gt;&quot; 
-d &quot;{ \&quot;fields\&quot;: [ \&quot;name\&quot; ], \&quot;sparse\&quot;: true, \&quot;type\&quot;: \&quot;hash\&quot;, \&quot;unique\&quot;: true}&quot;
</code></pre></div> <p>To create a combined index over multiple fields, add more members to the <em>fields</em> array. For example:</p> <div class=highlight><pre><span></span><code>curl -X POST &quot;https://api-gdn.eng.macrometa.io/_fabric/_system/_api/index/hash?collection=c1&quot;
-H &quot;Authorization: bearer &lt;token&gt;&quot; 
-d &quot;{ \&quot;fields\&quot;: [ \&quot;name\&quot;, \&quot;age\&quot; ], \&quot;sparse\&quot;: true, \&quot;type\&quot;: \&quot;hash\&quot;, \&quot;unique\&quot;: true}&quot;
</code></pre></div> <p>To index sub-attributes, specify the attribute path using the dot notation:</p> <div class=highlight><pre><span></span><code>curl -X POST &quot;https://api-gdn.eng.macrometa.io/_fabric/_system/_api/index/hash?collection=c1&quot; 
-H &quot;Authorization: bearer &lt;token&gt;&quot; 
-d &quot;{ \&quot;fields\&quot;: [ \&quot;name.first\&quot;, \&quot;name.last\&quot; ], \&quot;type\&quot;: \&quot;hash\&quot;}&quot;
</code></pre></div> <h2 id=indexing-array-values>Indexing Array Values<a class=headerlink href=#indexing-array-values title="Permanent link">&para;</a></h2> <p>If an index attribute contains an array, GDN will store the entire array as the index value by default. Accessing individual members of the array via the index is not possible this way. </p> <p>To make an index insert the individual array members into the index instead of the entire array value, a special array index needs to be created for the attribute. Array indexes can be set up like regular hash or skiplist indexes using the <code>collection.ensureIndex()</code> function. To make a hash or skiplist index an array index, the index attribute name needs to be extended with <i>[*]</i> when creating the index and when filtering in a C8QL query using the <code>IN</code> operator.</p> <p>The following example creates an array hash index on the <code>tags</code> attribute in a collection named <code>posts</code>:</p> <div class=highlight><pre><span></span><code>curl -X POST &quot;https://api-gdn.eng.macrometa.io/_fabric/_system/_api/document/c1&quot; 
-H &quot;Authorization: bearer &lt;token&gt;&quot;
-d &quot;{ \&quot;tags\&quot; : [ \&quot;foobar\&quot;, \&quot;baz\&quot;, \&quot;quux\&quot; ]}&quot;
</code></pre></div> <p>This array index can then be used for looking up individual <code>tags</code> values from C8QL queries via the <code>IN</code> operator:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>doc</span> <span class=nx>IN</span> <span class=nx>posts</span>
  <span class=nx>FILTER</span> <span class=s1>&#39;foobar&#39;</span> <span class=nx>IN</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span>
  <span class=nx>RETURN</span> <span class=nx>doc</span>
</code></pre></div> <p>It is possible to add the <a href=https://macrometacorp.github.io/docs-c8/reference/c8ql/advanced-features/array-operators/#array-expansion>array expansion operator</a> <i>[*]</i>, but it is not mandatory. You may use it to indicate that an array index is used, it is purely cosmetic however:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>doc</span> <span class=nx>IN</span> <span class=nx>posts</span>
  <span class=nx>FILTER</span> <span class=s1>&#39;foobar&#39;</span> <span class=nx>IN</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span><span class=p>[</span><span class=o>*</span><span class=p>]</span>
  <span class=nx>RETURN</span> <span class=nx>doc</span>
</code></pre></div> <p>The following FILTER conditions will <em>not</em> use the array index:</p> <div class=highlight><pre><span></span><code><span class=nx>FILTER</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span> <span class=nx>ANY</span> <span class=o>==</span> <span class=s1>&#39;foobar&#39;</span>
<span class=nx>FILTER</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span> <span class=nx>ANY</span> <span class=nx>IN</span> <span class=s1>&#39;foobar&#39;</span>
<span class=nx>FILTER</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span> <span class=nx>IN</span> <span class=s1>&#39;foobar&#39;</span>
<span class=nx>FILTER</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span> <span class=o>==</span> <span class=s1>&#39;foobar&#39;</span>
<span class=nx>FILTER</span> <span class=s1>&#39;foobar&#39;</span> <span class=o>==</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span>
</code></pre></div> <p>It is also possible to create an index on subattributes of array values. This makes sense if the index attribute is an array of objects, e.g.</p> <div class=highlight><pre><span></span><code>curl -X POST &quot;https://api-gdn.eng.macrometa.io/_fabric/_system/_api/document/c1&quot; 
-H &quot;Authorization: bearer &lt;token&gt;&quot;
-d &quot;{ \&quot;tags\&quot;: [ { \&quot;name\&quot;: \&quot;foobar\&quot; }, { \&quot;name\&quot;: \&quot;baz\&quot; }, { \&quot;name\&quot;: \&quot;quux\&quot; } ] }&quot;
</code></pre></div> <p>The following query will then use the array index (this does require the <a href=https://macrometacorp.github.io/docs-c8/reference/c8ql/advanced-features/array-operators/#array-expansion>array expansion operator</a>):</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>doc</span> <span class=nx>IN</span> <span class=nx>posts</span>
  <span class=nx>FILTER</span> <span class=s1>&#39;foobar&#39;</span> <span class=nx>IN</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>tags</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=nx>name</span>
  <span class=nx>RETURN</span> <span class=nx>doc</span>
</code></pre></div> <p>If you store a document having the array which does contain elements not having the subattributes this document will also be indexed with the value <code>null</code>, which in GDN is equal to attribute not existing.</p> <p>GDN supports creating array indexes with a single <i>[*]</i> operator per index attribute. For example, creating an index as follows is <em>not</em> supported:</p> <div class=highlight><pre><span></span><code><span class=nx>posts</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;tags[*].name[*].value&quot;</span> <span class=p>]</span> <span class=p>});</span>
</code></pre></div> <p>Array values will automatically be de-duplicated before being inserted into an array index. For example, if the following document is inserted into the collection, the duplicate array value <code>bar</code> will be inserted only once:</p> <div class=highlight><pre><span></span><code><span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;foobar&quot;</span><span class=p>,</span> <span class=s2>&quot;bar&quot;</span><span class=p>,</span> <span class=s2>&quot;bar&quot;</span> <span class=p>]</span> <span class=p>});</span>
</code></pre></div> <p>This is done to avoid redudant storage of the same index value for the same document, which would not provide any benefit.</p> <p>If an array index is declared <strong>unique</strong>, the de-duplication of array values will happen before inserting the values into the index, so the above insert operation with two identical values <code>bar</code> will not necessarily fail</p> <p>It will always fail if the index already contains an instance of the <code>bar</code> value. However, if the value <code>bar</code> is not already present in the index, then the de-duplication of the array values will effectively lead to <code>bar</code> being inserted only once.</p> <p>To turn off the deduplication of array values, it is possible to set the <strong>deduplicate</strong> attribute on the array index to <code>false</code>. The default value for <strong>deduplicate</strong> is <code>true</code> however, so de-duplication will take place if not explicitly turned off.</p> <div class=highlight><pre><span></span><code><span class=nx>posts</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;tags[*]&quot;</span> <span class=p>],</span> <span class=nx>deduplicate</span><span class=o>:</span> <span class=kc>false</span> <span class=p>});</span>

<span class=c1>// will fail now</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;foobar&quot;</span><span class=p>,</span> <span class=s2>&quot;bar&quot;</span><span class=p>,</span> <span class=s2>&quot;bar&quot;</span> <span class=p>]</span> <span class=p>});</span> 
</code></pre></div> <p>If an array index is declared and you store documents that do not have an array at the specified attribute this document will not be inserted in the index. Hence the following objects will not be indexed:</p> <div class=highlight><pre><span></span><code><span class=nx>posts</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;tags[*]&quot;</span> <span class=p>]</span> <span class=p>});</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>something</span><span class=o>:</span> <span class=s2>&quot;else&quot;</span> <span class=p>});</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=kc>null</span> <span class=p>});</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=s2>&quot;this is no array&quot;</span> <span class=p>});</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=p>[</span><span class=mf>1</span><span class=p>,</span> <span class=mf>2</span><span class=p>,</span> <span class=mf>3</span><span class=p>]</span> <span class=p>}</span> <span class=p>});</span>
</code></pre></div> <p>An array index is able to index explicit <code>null</code> values. When queried for <code>null</code>values, it will only return those documents having explicitly <code>null</code> stored in the array, it will not return any documents that do not have the array at all.</p> <div class=highlight><pre><span></span><code><span class=nx>posts</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;tags[*]&quot;</span> <span class=p>]</span> <span class=p>});</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=kc>null</span><span class=p>})</span> <span class=c1>// Will not be indexed</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[]})</span>  <span class=c1>// Will not be indexed</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=kc>null</span><span class=p>]});</span> <span class=c1>// Will be indexed for null</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=kc>null</span><span class=p>,</span> <span class=mf>1</span><span class=p>,</span> <span class=mf>2</span><span class=p>]});</span> <span class=c1>// Will be indexed for null, 1 and 2</span>
</code></pre></div> <p>Declaring an array index as <strong>sparse</strong> does not have an effect on the array part of the index, this in particular means that explicit <code>null</code> values are also indexed in the <strong>sparse</strong> version.</p> <p>If an index is combined from an array and a normal attribute the sparsity will apply for the attribute e.g.:</p> <div class=highlight><pre><span></span><code><span class=nx>posts</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;tags[*]&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span> <span class=p>],</span> <span class=nx>sparse</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&quot;alice&quot;</span><span class=p>})</span> <span class=c1>// Will not be indexed</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[],</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&quot;alice&quot;</span><span class=p>})</span> <span class=c1>// Will not be indexed</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=mf>1</span><span class=p>,</span> <span class=mf>2</span><span class=p>,</span> <span class=mf>3</span><span class=p>]})</span> <span class=c1>// Will not be indexed</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=mf>1</span><span class=p>,</span> <span class=mf>2</span><span class=p>,</span> <span class=mf>3</span><span class=p>],</span> <span class=nx>name</span><span class=o>:</span> <span class=kc>null</span><span class=p>})</span> <span class=c1>// Will not be indexed</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=mf>1</span><span class=p>,</span> <span class=mf>2</span><span class=p>,</span> <span class=mf>3</span><span class=p>],</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&quot;alice&quot;</span><span class=p>})</span>
<span class=c1>// Will be indexed for [1, &quot;alice&quot;], [2, &quot;alice&quot;], [3, &quot;alice&quot;]</span>
<span class=nx>posts</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span><span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=kc>null</span><span class=p>],</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&quot;bob&quot;</span><span class=p>})</span>
<span class=c1>// Will be indexed for [null, &quot;bob&quot;] </span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Filtering using array indexes only works from within C8QL queries and only if the query filters on the indexed attribute using the <code>IN</code> operator. The other comparison operators (<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>ANY</code>, <code>ALL</code>, <code>NONE</code>) currently cannot use array indexes.</p> </div> <h2 id=persistent-indexes>Persistent Indexes<a class=headerlink href=#persistent-indexes title="Permanent link">&para;</a></h2> <h3 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h3> <p>This is an introduction to C8DB persistent indexes.</p> <p>It is possible to define a persistent index on one or more attributes (or paths) of documents. The index is then used in queries to locate documents within a given range. If the index is declared unique, then no two documents are allowed to have the same set of attribute values.</p> <p>Creating a new document or updating a document will fail if the uniqueness is violated. If the index is declared sparse, a document will be excluded from the index and no uniqueness checks will be performed if any index attribute value is not set or has a value of <code>null</code>. </p> <h3 id=accessing-persistent-indexes>Accessing Persistent Indexes<a class=headerlink href=#accessing-persistent-indexes title="Permanent link">&para;</a></h3> <p>Ensures that a unique persistent index exists <code>collection.ensureIndex({ type: "persistent", fields: [ "field1", ..., "fieldn" ], unique: true })</code></p> <p>Creates a unique persistent index on all documents using <em>field1</em>, ... <em>fieldn</em> as attribute paths. At least one attribute path has to be given. The index will be non-sparse by default.</p> <p>All documents in the collection must differ in terms of the indexed attributes. Creating a new document or updating an existing document will will fail if the attribute uniqueness is violated. </p> <p>To create a sparse unique index, set the <em>sparse</em> attribute to <code>true</code>:</p> <p><code>collection.ensureIndex({ type: "persistent", fields: [ "field1", ..., "fieldn" ], unique: true, sparse: true })</code></p> <p>In a sparse index all documents will be excluded from the index that do not contain at least one of the specified index attributes or that have a value of <code>null</code> in any of the specified index attributes. Such documents will not be indexed, and not be taken into account for uniqueness checks.</p> <p>In a non-sparse index, these documents will be indexed (for non-present indexed attributes, a value of <code>null</code> will be used) and will be taken into account for uniqueness checks.</p> <p>In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <p>To ensure that a non-unique persistent index exists <code>collection.ensureIndex({ type: "persistent", fields: [ "field1", ..., "fieldn" ] })</code></p> <p>Creates a non-unique persistent index on all documents using <em>field1</em>, ... <em>fieldn</em> as attribute paths. At least one attribute path has to be given. The index will be non-sparse by default.</p> <p>To create a sparse unique index, set the <em>sparse</em> attribute to <code>true</code>.</p> <p>In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <h3 id=query-by-example>Query by example<a class=headerlink href=#query-by-example title="Permanent link">&para;</a></h3> <p>constructs a query-by-example using a persistent index <code>collection.byExample(example)</code></p> <p>Selects all documents from the collection that match the specified example and returns a cursor. A persistent index will be used if present.</p> <p>You can use <em>toArray</em>, <em>next</em>, or <em>hasNext</em> to access the result. The result can be limited using the <em>skip</em> and <em>limit</em> operator.</p> <p>An attribute name of the form <em>a.b</em> is interpreted as attribute path, not as attribute. If you use</p> <div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nt>&quot;a&quot;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&quot;c&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div> <p>as example, then you will find all documents, such that the attribute <em>a</em> contains a document of the form <em>{c : 1 }</em>. For example the document</p> <div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nt>&quot;a&quot;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&quot;c&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>},</span> <span class=nt>&quot;b&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>}</span>
</code></pre></div> <p>will match, but the document</p> <div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nt>&quot;a&quot;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&quot;c&quot;</span> <span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nt>&quot;b&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div> <p>will not.</p> <p>However, if you use</p> <div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nt>&quot;a.c&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>},</span>
</code></pre></div> <p>then you will find all documents, which contain a sub-document in <em>a</em> that has an attribute <em>c</em> of value <em>1</em>. Both the following documents</p> <p><div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nt>&quot;a&quot;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&quot;c&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>},</span> <span class=nt>&quot;b&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>}</span>
</code></pre></div> and</p> <p><div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nt>&quot;a&quot;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&quot;c&quot;</span> <span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nt>&quot;b&quot;</span> <span class=p>:</span> <span class=mi>1</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div> will match.</p> <h2 id=ttl-time-to-live-indexes>TTL (time-to-live) Indexes<a class=headerlink href=#ttl-time-to-live-indexes title="Permanent link">&para;</a></h2> <h3 id=introduction_1>Introduction<a class=headerlink href=#introduction_1 title="Permanent link">&para;</a></h3> <p>The TTL index type provided by GDN can be used for removing expired documents from a collection.</p> <p>The TTL index is set up by setting an <code>expireAfter</code> value and by selecting a single document attribute which contains a reference point in time. For each document, that reference point in time can then be specified as a numeric timestamp (Unix timestamp) or a date string in format <code>YYYY-MM-DDTHH:MM:SS</code> with an optional timezone offset.</p> <p>All date strings without a timezone offset will be interpreted as UTC dates.</p> <p>Documents will count as expired when wall clock time is beyond the per-document reference point in time value plus the index' <code>expireAfter</code> value added to it. </p> <h3 id=removing-documents-at-a-fixed-period-after-creation-update>Removing documents at a fixed period after creation / update<a class=headerlink href=#removing-documents-at-a-fixed-period-after-creation-update title="Permanent link">&para;</a></h3> <p>One use case supported by TTL indexes is to remove documents at a fixed duration after they have been created or last updated. This requires setting up the index with an attribute that contains the documents' creation or last-updated time.</p> <p>Let's assume the index attribute is set to "creationDate", and the <code>expireAfter</code> attribute of the index was set to 600 seconds (10 minutes).</p> <div class=highlight><pre><span></span><code>    <span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;ttl&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;creationDate&quot;</span><span class=p>],</span> <span class=nx>expireAfter</span><span class=o>:</span> <span class=mf>600</span> <span class=p>});</span>
</code></pre></div> <p>Let's further assume the following document now gets inserted into the collection:</p> <div class=highlight><pre><span></span><code>    <span class=p>{</span> <span class=nt>&quot;creationDate&quot;</span> <span class=p>:</span> <span class=mi>1550165973</span> <span class=p>}</span>
</code></pre></div> <p>This document will be indexed with a reference point in time value of <code>1550165973</code>, which translates to the human-readable date/time <code>2019-02-14T17:39:33.000Z</code>. The document will expire 600 seconds afterwards, which is at timestamp <code>1550166573</code> (or <code>2019-02-14T17:49:33.000Z</code> in the human-readable version). From that point on, the document is a candidate for being removed.</p> <p>The numeric date time values for the index attribute need to be specified <strong>in seconds</strong> since January 1<sup>st</sup> 1970 (Unix timestamp). To calculate the current timestamp using JavaScript in this format, use: <code>Date.now() / 1000</code>. To calculate it from an arbitrary <code>Date</code> instance, use: <code>Date.getTime() / 1000</code>. In C8QL, you also have to divide the timestamp, e.g. <code>DATE_NOW() / 1000</code>.</p> <p>Alternatively, the reference points in time can be specified as a date string in format <code>YYYY-MM-DDTHH:MM:SS</code> with an optional timezone offset. All date strings without a timezone offset will be interpreted as UTC dates.</p> <p>The above example document using a date string attribute value would be</p> <div class=highlight><pre><span></span><code>    <span class=p>{</span> <span class=nt>&quot;creationDate&quot;</span> <span class=p>:</span> <span class=s2>&quot;2019-02-14T17:39:33.000Z&quot;</span> <span class=p>}</span>
</code></pre></div> <p>Now any data-modification access to the document could update the value in the document's <code>creationDate</code> attribute to the current date/time, which would prolong the existence of the document and keep it from being expired and removed. </p> <p>GDN will not automatically set a document's reference point in time on initial insertion or on every subsequent modification of the document. Instead, it is the responsibility of client applications to set and update the reference points in time of documents whenever the use case requires it.</p> <h3 id=removing-documents-at-certain-points-in-time>Removing documents at certain points in time<a class=headerlink href=#removing-documents-at-certain-points-in-time title="Permanent link">&para;</a></h3> <p>Another use case is to specify a per-document expiration/removal point in time, and setting the <code>expireAfter</code> attribute to a low value (e.g. 0 seconds).</p> <p>Let's assume the index attribute is set to "expireDate", and the <code>expireAfter</code> attribute of the index was set to 0 seconds (immediately when wall clock time reaches the value specified in <code>expireDate</code>).</p> <div class=highlight><pre><span></span><code>    <span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;ttl&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;expireDate&quot;</span><span class=p>],</span> <span class=nx>expireAfter</span><span class=o>:</span> <span class=mf>0</span> <span class=p>});</span>
</code></pre></div> <p>When storing the following document in the collection, it will expire at the point in time specified in the document itself:</p> <div class=highlight><pre><span></span><code>    <span class=p>{</span> <span class=nt>&quot;expireDate&quot;</span> <span class=p>:</span> <span class=s2>&quot;2019-03-28T01:06:00Z&quot;</span> <span class=p>}</span>
</code></pre></div> <p>As <code>expireAfter</code> was set to 0, the document will count as expired when wall clock time has reached the timeout.</p> <p>It should be intuitive to see that the <code>expireDate</code> can be different per document. This allows mixing of documents with different expiration periods by calculating their expiration dates differently in the client application.</p> <h3 id=format-of-datetime-values>Format of date/time values<a class=headerlink href=#format-of-datetime-values title="Permanent link">&para;</a></h3> <p>The expiration date time values can be specified either as a numeric timestamp, containing the number of milliseconds since January 1<sup>st</sup> 1970 (rounded down to the nearest second), or as a date/time string in ISO 8601 format <code>YYYY-MM-DDTHH:MM:SS</code> with an optional timezone offset. The timezone offset can be specified as either <code>Z</code> (Zulu/UTC time) or as a deviation from UTC time in hours and minutes (i.e. <code>+HH:MM</code> or <code>-HH:MM</code>).</p> <p>Valid example date string values are:</p> <table> <thead> <tr> <th>Date/time string</th> <th>Local Date</th> <th>Local Time</th> <th>Timezone Offset</th> </tr> </thead> <tbody> <tr> <td><code>"2019-05-27"</code></td> <td>May 27<sup>th</sup> 2019</td> <td>00:00:00</td> <td>+00:00 (UTC time)</td> </tr> <tr> <td><code>"2019-05-27T21:20:00"</code></td> <td>May 27<sup>th</sup> 2019</td> <td>21:20:00</td> <td>+00:00 (UTC time)</td> </tr> <tr> <td><code>"2019-05-27T21:20:00Z"</code></td> <td>May 27<sup>th</sup> 2019</td> <td>21:20:00</td> <td>+00:00 (UTC time)</td> </tr> <tr> <td><code>"2019-05-27T21:20:00.123Z"</code></td> <td>May 27<sup>th</sup> 2019</td> <td>21:20:00.123</td> <td>+00:00 (UTC time)</td> </tr> <tr> <td><code>"2019-05-27T21:20:00.123+01:30"</code></td> <td>May 27<sup>th</sup> 2019</td> <td>21:20:00.123</td> <td>+01:30 offset from UTC time</td> </tr> <tr> <td><code>"2019-05-27T21:20:00.123-02:00"</code></td> <td>May 27<sup>th</sup> 2019</td> <td>21:20:00.123</td> <td>-02:00 offset from UTC time</td> </tr> </tbody> </table> <p>Using an invalid date string value in a document's TTL index attribute will prevent the document from being inserted into the TTL index, so it will neither be expired nor removed automatically. No error is raised however.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Date string values can be programmatically validated using the AQL function <code>IS_DATESTRING</code>.</p> </div> <h3 id=preventing-documents-from-being-removed>Preventing documents from being removed<a class=headerlink href=#preventing-documents-from-being-removed title="Permanent link">&para;</a></h3> <p>In case the index attribute does not contain a numeric value nor a proper date string, the document will not be stored in the TTL index and thus will not become a candidate for expiration and removal. Providing either a non-numeric value or even no value for the index attribute is a supported way to keep documents from being expired and removed.</p> <h3 id=limitations>Limitations<a class=headerlink href=#limitations title="Permanent link">&para;</a></h3> <p>TTL indexes are designed exactly for the purpose of removing expired documents from collections. It is <strong>not recommended</strong> to rely on TTL indexes for user-land C8QL queries. This is because TTL indexes may store a transformed, always numerical version of the index attribute value internally even if it was originally passed in as a date string. As a result, you may see different values for the attribute, depending on whether it gets taken from the index or the document. TTL indexes will likely not be usable for filtering and sort operations in user-land C8QL queries.</p> <blockquote> <p>There can at most be one TTL index per collection.</p> </blockquote> <p>The actual removal of expired documents will not necessarily happen immediately when they have reached their expiration time. </p> <p>Expired documents will eventually be removed by a background thread that is periodically going through all TTL indexes and removing the expired documents.</p> <p>There is no guarantee when exactly the removal of expired documents will be carried out, so queries may still find and return documents that have already expired. These will eventually be removed when the background thread kicks in and has spare capacity to remove the expired documents. It is guaranteed however that only documents which are past their expiration time will actually be removed.</p> <p>The frequency for invoking the background removal thread can be configured using the <code>--ttl.frequency</code> startup option. The frequency is specified in milliseconds.</p> <p>In order to avoid "random" load spikes by the background thread suddenly kicking in and removing a lot of documents at once, the number of to-be-removed documents per thread invocation can be capped.</p> <p>The total maximum number of documents to be removed per thread invocation is controlled by the startup option <code>--ttl.max-total-removes</code>. The maximum number of documents in a single collection at once can be controlled by the startup option <code>--ttl.max-collection-removes</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>There are limited number of background threads for performing the removal of expired documents of all collections in all databases. If the number of databases and collections with TTL indexes is high and there are many documents to remove from these, the background thread may at least temporarily lag behind with its removal operations. It should eventually catch up in case the number of to-be-removed documents per invocation is not higher than the background thread's configured threshold values.</p> </div> <h3 id=accessing-ttl-indexes>Accessing TTL Indexes<a class=headerlink href=#accessing-ttl-indexes title="Permanent link">&para;</a></h3> <p>Ensures that a TTL index exists:</p> <p><code>collection.ensureIndex({ type: "ttl", fields: [ "field" ], expireAfter: 600 })</code></p> <p>Creates a TTL index on all documents using <em>field</em> as attribute path. Exactly one attribute path has to be given. The index will be sparse in all cases.</p> <p>In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <h2 id=fulltext-indexes>Fulltext Indexes<a class=headerlink href=#fulltext-indexes title="Permanent link">&para;</a></h2> <h3 id=introduction_2>Introduction<a class=headerlink href=#introduction_2 title="Permanent link">&para;</a></h3> <p>A fulltext index can be used to find words, or prefixes of words inside documents.</p> <p>A fulltext index can be defined on one attribute only, and will include all words contained in documents that have a textual value in the index attribute.</p> <p>For example, given a fulltext index on the <code>translations</code> attribute and the following documents, then searching for <code>лиса</code> using the fulltext index would return only the first document. Searching for the index for the exact string <code>Fox</code> would return the first two documents, and searching for <code>prefix:Fox</code> would return all three documents:</p> <div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nx>translations</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=s2>&quot;fox&quot;</span><span class=p>,</span> <span class=nx>de</span><span class=o>:</span> <span class=s2>&quot;Fuchs&quot;</span><span class=p>,</span> <span class=nx>fr</span><span class=o>:</span> <span class=s2>&quot;renard&quot;</span><span class=p>,</span> <span class=nx>ru</span><span class=o>:</span> <span class=s2>&quot;лиса&quot;</span> <span class=p>}</span> <span class=p>}</span>
<span class=p>{</span> <span class=nx>translations</span><span class=o>:</span> <span class=s2>&quot;Fox is the English translation of the German word Fuchs&quot;</span> <span class=p>}</span>
<span class=p>{</span> <span class=nx>translations</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;C8DB&quot;</span><span class=p>,</span> <span class=s2>&quot;document&quot;</span><span class=p>,</span> <span class=s2>&quot;database&quot;</span><span class=p>,</span> <span class=s2>&quot;Fox&quot;</span> <span class=p>]</span> <span class=p>}</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Deeper nested objects are ignored. For example, a fulltext index on <em>translations</em> would index <em>Fuchs</em>, but not <em>fox</em>, given the following document structure:</p> </div> <div class=highlight><pre><span></span><code><span class=p>{</span> <span class=nx>translations</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=p>{</span> <span class=nx>US</span><span class=o>:</span> <span class=s2>&quot;fox&quot;</span> <span class=p>},</span> <span class=nx>de</span><span class=o>:</span> <span class=s2>&quot;Fuchs&quot;</span> <span class=p>}</span>
</code></pre></div> <p>If you need to search across multiple fields and/or nested objects, you may write all the strings into a special attribute, which you then create the index on (it might be necessary to clean the strings first, e.g. remove line breaks and strip certain words).</p> <p>If the index attribute is neither a string, an object or an array, its contents will not be indexed. When indexing the contents of an array attribute, an array member will only be included in the index if it is a string. When indexing the contents of an object attribute, an object member value will only be included in the index if it is a string. Other data types are ignored and not indexed.</p> <h3 id=accessing-fulltext-indexes>Accessing Fulltext Indexes<a class=headerlink href=#accessing-fulltext-indexes title="Permanent link">&para;</a></h3> <p>Ensures that a fulltext index exists:</p> <p><code>collection.ensureIndex({ type: "fulltext", fields: [ "field" ], minLength: minLength })</code></p> <p>Creates a fulltext index on all documents on attribute <em>field</em>.</p> <p>Fulltext indexes are implicitly sparse: all documents which do not have the specified <em>field</em> attribute or that have a non-qualifying value in their <em>field</em> attribute will be ignored for indexing.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Only a single attribute can be indexed. Specifying multiple attributes is unsupported.</p> </div> <p>The minimum length of words that are indexed can be specified via the <em>minLength</em> parameter. Words shorter than minLength characters will not be indexed. <em>minLength</em> has a default value of 2. It is thus recommended to explicitly specify this value.</p> <p>In case that the index was successfully created, an object with the index details is returned.</p> <p>Looks up a fulltext index:</p> <p><code>collection.lookupFulltextIndex(attribute, minLength)</code></p> <p>Checks whether a fulltext index on the given attribute <em>attribute</em> exists.</p> <h3 id=fulltext-c8ql-functions>Fulltext C8QL Functions<a class=headerlink href=#fulltext-c8ql-functions title="Permanent link">&para;</a></h3> <p>Fulltext C8QL functions are detailed in <a href=../../../c8ql/functions/fulltext/ >Fulltext functions</a>.</p> <h2 id=geo-spatial-indexes>Geo-Spatial Indexes<a class=headerlink href=#geo-spatial-indexes title="Permanent link">&para;</a></h2> <p>GDN features <a href=http://s2geometry.io/ target=_blank>Google S2</a> based geospatial index. Indexing is supported for a subset of the <a href=#geojson><strong>GeoJSON</strong></a> geometry types as well as simple latitude longitude pairs.</p> <p>C8QL's geospatial functions and GeoJSON constructors are described in <a href=../../../c8ql/functions/geo/ >Geo functions</a>.</p> <p>The geospatial index supports containment and intersection queries for various geometric 2D shapes. You should be mainly using AQL queries to perform these types of operations. The index can operate in <strong>two different modes</strong>, depending on if you want to use the GeoJSON data-format or not. The modes are mainly toggled by using the <code>geoJson</code> field when creating the index.</p> <p>This index assumes coordinates with the latitude between -90 and 90 degrees and the longitude between -180 and 180 degrees. A geo index will ignore all documents which do not fulfill these requirements.</p> <h3 id=geojson-mode>GeoJSON Mode<a class=headerlink href=#geojson-mode title="Permanent link">&para;</a></h3> <p>To create an index in GeoJSON mode execute:</p> <div class=highlight><pre><span></span><code><span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;geo&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;geometry&quot;</span> <span class=p>],</span> <span class=nx>geoJson</span><span class=o>:</span><span class=kc>true</span> <span class=p>})</span>
</code></pre></div> <p>This creates the index on all documents and uses <em>geometry</em> as the attributed field where the value is either a <a href=https://tools.ietf.org/html/rfc7946#section-3.1>Geometry Object</a>{:target="<em>blank"} <strong>or</strong> a _coordinate array</em>. </p> <p>The array must contain at least two numeric values with longitude (first value) and the latitude (second value). This corresponds to the format described in <a href=https://tools.ietf.org/html/rfc7946#section-3.1.1 target=_blank>RFC 7946 Position</a>.</p> <p>All documents, which do not have the attribute path or have a non-conform value in it, are excluded from the index.</p> <p>A geo index is implicitly sparse, and there is no way to control its sparsity. In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <h3 id=non-geojson-mode>Non-GeoJSON mode<a class=headerlink href=#non-geojson-mode title="Permanent link">&para;</a></h3> <p>This index mode exclusively supports indexing on coordinate arrays. Values that contain GeoJSON or other types of data will be ignored. In the non-GeoJSON mode the index can be created on one or two fields.</p> <p>To create a geo-spatial index on all documents using <em>latitude</em> and <em>longitude</em> as separate attribute paths, two paths need to be specified in the <em>fields</em> array:</p> <p><code>collection.ensureIndex({ type: "geo", fields: [ "latitude", "longitude" ] })</code></p> <p>The first field is always defined to be the <em>latitude</em> and the second is the <em>longitude</em>. The <code>geoJson</code> flag is implicitly <em>false</em> in this mode.</p> <p>Alternatively you can specify only one field:</p> <p><code>collection.ensureIndex({ type: "geo", fields: [ "location" ], geoJson:false })</code></p> <p>It creates a geospatial index on all documents using <em>location</em> as the path to the coordinates. The value of the attribute has to be an array with at least two numeric values. The array must contain the latitude (first value) and the longitude (second value).</p> <p>All documents, which do not have the attribute path(s) or have a non-conforming value in it, are excluded from the index.</p> <p>A geo index is implicitly sparse, and there is no way to control its sparsity. In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <p>In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <h3 id=indexed-geospatial-queries>Indexed GeoSpatial Queries<a class=headerlink href=#indexed-geospatial-queries title="Permanent link">&para;</a></h3> <p>The geospatial index supports a variety of C8QL queries, which can be built with the help of the <a href=../../../c8ql/functions/geo/ >geo utility functions</a>. There are three specific geo functions that can be optimized, provided that they are used correctly: <code>GEO_DISTANCE, GEO_CONTAINS, GEO_INTERSECTS</code>. Additionally, there is a built-in support to optimize the older geo functions <code>DISTANCE</code>, <code>NEAR</code> and <code>WITHIN</code> (the last two only if they are used in their 4 argument version, without <em>distanceName</em>).</p> <p>When in doubt whether your query is being properly optimized, check the <a href=../c8ql/execution-and-performance-explaining-queries.md>C8QL explain</a> output to check for index usage.</p> <h4 id=query-for-results-near-origin-near-type-query>Query for Results near Origin (NEAR type query)<a class=headerlink href=#query-for-results-near-origin-near-type-query title="Permanent link">&para;</a></h4> <p>A basic example of a query for results near an origin point:</p> <div class=highlight><pre><span></span><code><span class=k>FOR</span> <span class=n>x</span> <span class=k>IN</span> <span class=n>geo_collection</span>
  <span class=n>FILTER</span> <span class=n>GEO_DISTANCE</span><span class=p>([</span><span class=o>@</span><span class=n>lng</span><span class=p>,</span> <span class=o>@</span><span class=n>lat</span><span class=p>],</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>100000</span>
  <span class=k>RETURN</span> <span class=n>x</span><span class=p>.</span><span class=n>_key</span>
</code></pre></div> <p>The first parameter can be a GeoJSON object or a coordinate array in <code>[longitude, latitude]</code> ordering. The second parameter is the document field on which the index was created. The function <code>GEO_DISTANCE</code> always returns the distance in meters, so will receive results up until <em>100km</em>.</p> <h4 id=query-for-sorted-results-near-origin-near-type-query>Query for Sorted Results near Origin (NEAR type query)<a class=headerlink href=#query-for-sorted-results-near-origin-near-type-query title="Permanent link">&para;</a></h4> <p>A basic example of a query for the 1000 nearest results to an origin point (ascending sorting):</p> <div class=highlight><pre><span></span><code><span class=k>FOR</span> <span class=n>x</span> <span class=k>IN</span> <span class=n>geo_collection</span>
  <span class=n>SORT</span> <span class=n>GEO_DISTANCE</span><span class=p>([</span><span class=o>@</span><span class=n>lng</span><span class=p>,</span> <span class=o>@</span><span class=n>lat</span><span class=p>],</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span> <span class=k>ASC</span>
  <span class=k>LIMIT</span> <span class=mi>1000</span>
  <span class=k>RETURN</span> <span class=n>x</span><span class=p>.</span><span class=n>_key</span>
</code></pre></div> <p>The first parameter can be a GeoJSON object or a coordinate array in <code>[longitude, latitude]</code> ordering. The second parameter is the documents field on which the index was created.</p> <p>You may also get results farthest away (distance sorted in descending order):</p> <div class=highlight><pre><span></span><code><span class=k>FOR</span> <span class=n>x</span> <span class=k>IN</span> <span class=n>geo_collection</span>
  <span class=n>SORT</span> <span class=n>GEO_DISTANCE</span><span class=p>([</span><span class=o>@</span><span class=n>lng</span><span class=p>,</span> <span class=o>@</span><span class=n>lat</span><span class=p>],</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span> <span class=k>DESC</span>
  <span class=k>LIMIT</span> <span class=mi>1000</span>
  <span class=k>RETURN</span> <span class=n>x</span><span class=p>.</span><span class=n>_key</span>
</code></pre></div> <h4 id=query-for-results-within-distance>Query for Results within Distance<a class=headerlink href=#query-for-results-within-distance title="Permanent link">&para;</a></h4> <p>A query which returns documents at a distance of <em>1km</em> or farther away, up to <em>100km</em> from the origin. This will return the documents with a GeoJSON value that is located in the specified search annulus.</p> <div class=highlight><pre><span></span><code><span class=k>FOR</span> <span class=n>x</span> <span class=k>IN</span> <span class=n>geo_collection</span>
  <span class=n>FILTER</span> <span class=n>GEO_DISTANCE</span><span class=p>([</span><span class=o>@</span><span class=n>lng</span><span class=p>,</span> <span class=o>@</span><span class=n>lat</span><span class=p>],</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>100000</span>
  <span class=n>FILTER</span> <span class=n>GEO_DISTANCE</span><span class=p>([</span><span class=o>@</span><span class=n>lng</span><span class=p>,</span> <span class=o>@</span><span class=n>lat</span><span class=p>],</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>1000</span>
  <span class=k>RETURN</span> <span class=n>x</span>
</code></pre></div> <h4 id=query-for-results-contained-in-polygon>Query for Results contained in Polygon<a class=headerlink href=#query-for-results-contained-in-polygon title="Permanent link">&para;</a></h4> <p>A query which returns documents whose stored geometry is contained within a GeoJSON Polygon.</p> <div class=highlight><pre><span></span><code><span class=n>LET</span> <span class=n>polygon</span> <span class=o>=</span> <span class=n>GEO_POLYGON</span><span class=p>([[[</span><span class=mi>60</span><span class=p>,</span><span class=mi>35</span><span class=p>],[</span><span class=mi>50</span><span class=p>,</span><span class=mi>5</span><span class=p>],[</span><span class=mi>75</span><span class=p>,</span><span class=mi>10</span><span class=p>],[</span><span class=mi>70</span><span class=p>,</span><span class=mi>35</span><span class=p>]]])</span>
<span class=k>FOR</span> <span class=n>x</span> <span class=k>IN</span> <span class=n>geo_collection</span>
  <span class=n>FILTER</span> <span class=n>GEO_CONTAINS</span><span class=p>(</span><span class=n>polygon</span><span class=p>,</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span>
  <span class=k>RETURN</span> <span class=n>x</span>
</code></pre></div> <p>The first parameter of <code>GEO_CONTAINS</code> must be a polygon. Other types are not valid. The second parameter must contain the document field on which the index was created.</p> <h4 id=query-for-results-intersecting-a-polygon>Query for Results Intersecting a Polygon<a class=headerlink href=#query-for-results-intersecting-a-polygon title="Permanent link">&para;</a></h4> <p>A query which returns documents with an intersection of their stored geometry and a GeoJSON Polygon.</p> <div class=highlight><pre><span></span><code><span class=n>LET</span> <span class=n>polygon</span> <span class=o>=</span> <span class=n>GEO_POLYGON</span><span class=p>([[[</span><span class=mi>60</span><span class=p>,</span><span class=mi>35</span><span class=p>],[</span><span class=mi>50</span><span class=p>,</span><span class=mi>5</span><span class=p>],[</span><span class=mi>75</span><span class=p>,</span><span class=mi>10</span><span class=p>],[</span><span class=mi>70</span><span class=p>,</span><span class=mi>35</span><span class=p>]]])</span>
<span class=k>FOR</span> <span class=n>x</span> <span class=k>IN</span> <span class=n>geo_collection</span>
  <span class=n>FILTER</span> <span class=n>GEO_INTERSECTS</span><span class=p>(</span><span class=n>polygon</span><span class=p>,</span> <span class=n>x</span><span class=p>.</span><span class=n>geometry</span><span class=p>)</span>
  <span class=k>RETURN</span> <span class=n>x</span>
</code></pre></div> <p>The first parameter of <code>GEO_INTERSECTS</code> must be a polygon. Other types are not valid. The second parameter must contain the document field on which the index was created.</p> <h3 id=geojson>GeoJSON<a class=headerlink href=#geojson title="Permanent link">&para;</a></h3> <p>GeoJSON is a geospatial data format based on JSON. It defines several different types of JSON objects and the way in which they can be combined to represent data about geographic shapes on the earth surface. GeoJSON uses a geographic coordinate reference system, World Geodetic System 1984 (WGS 84), and units of decimal degrees.</p> <p>Internally GDN maps all coordinates onto a unit sphere. Distances are projected onto a sphere with the Earth's <em>Volumetric mean radius</em> of <em>6371 km</em>. GDN implements a useful subset of the GeoJSON format <a href=https://tools.ietf.org/html/rfc7946 target=_blank>(RFC 7946)</a>. Feature Objects and the GeometryCollection type are not supported. </p> <p>Supported geometry object types are:</p> <ul> <li>Point</li> <li>MultiPoint</li> <li>LineString</li> <li>MultiLineString</li> <li>Polygon</li> </ul> <h4 id=point>Point<a class=headerlink href=#point title="Permanent link">&para;</a></h4> <p>A <a href=https://tools.ietf.org/html/rfc7946#section-3.1.2 target=_blank>GeoJSON Point</a> is a <a href=https://tools.ietf.org/html/rfc7946#section-3.1.1 target=_blank>position</a> comprised of a longitude and a latitude:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;Point&quot;</span><span class=p>,</span>
  <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <h4 id=multipoint>MultiPoint<a class=headerlink href=#multipoint title="Permanent link">&para;</a></h4> <p>A <a href=https://tools.ietf.org/html/rfc7946#section-3.1.7 target=_blank>GeoJSON MultiPoint</a> is an array of positions:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;MultiPoint&quot;</span><span class=p>,</span>
  <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
    <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>]</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <h4 id=linestring>LineString<a class=headerlink href=#linestring title="Permanent link">&para;</a></h4> <p>A <a href=https://tools.ietf.org/html/rfc7946#section-3.1.4 target=_blank>GeoJSON LineString</a> is an array of two or more positions:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;LineString&quot;</span><span class=p>,</span>
  <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
    <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>]</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <h4 id=multilinestring>MultiLineString<a class=headerlink href=#multilinestring title="Permanent link">&para;</a></h4> <p>A <a href=https://tools.ietf.org/html/rfc7946#section-3.1.5 target=_blank>GeoJSON MultiLineString</a> is an array of LineString coordinate arrays:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;MultiLineString&quot;</span><span class=p>,</span>
  <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>[</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>]</span>
    <span class=p>],</span>
    <span class=p>[</span>
      <span class=p>[</span><span class=mf>102.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>103.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>]</span>
    <span class=p>]</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <h4 id=polygon>Polygon<a class=headerlink href=#polygon title="Permanent link">&para;</a></h4> <p>A <a href=https://tools.ietf.org/html/rfc7946#section-3.1.6 target=_blank>GeoJSON Polygon</a> consists of a series of closed <code>LineString</code> objects (ring-like). These <em>Linear Ring</em> objects consist of four or more vertices with the first and last coordinate pairs being equal. Coordinates of a Polygon are an array of linear ring coordinate arrays. The first element in the array represents the exterior ring.</p> <p>Any subsequent elements represent interior rings (holes within the surface).</p> <ul> <li>A linear ring may not be empty, it needs at least three <em>distinct</em> coordinates</li> <li>Within the same linear ring consecutive coordinates may be the same, otherwise (except the first and last one) all coordinates need to be distinct</li> <li>A linear ring defines two regions on the sphere. GDN will always interpret the region of smaller area to be the interior of the ring. This introduces a practical limitation that no polygon may have an outer ring enclosing more than half the Earth's surface</li> </ul> <p><strong>No Holes:</strong></p> <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;Polygon&quot;</span><span class=p>,</span>
    <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>[</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>]</span>
    <span class=p>]</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <p><strong>With Holes:</strong></p> <ul> <li>The exterior ring should not self-intersect.</li> <li>The interior rings must be contained in the outer ring</li> <li>No two rings can cross each other, i.e. no ring may intersect both the interior and exterior face of another ring</li> <li>Rings cannot share edges, they may however share vertices</li> <li>No ring may be empty</li> <li>Polygon rings should follow the right-hand rule for orientation (counterclockwise external rings, clockwise internal rings).</li> </ul> <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;Polygon&quot;</span><span class=p>,</span>
  <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>[</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>]</span>
    <span class=p>],</span>
    <span class=p>[</span>
      <span class=p>[</span><span class=mf>100.8</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.8</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.2</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>],</span>
      <span class=p>[</span><span class=mf>100.8</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>]</span>
    <span class=p>]</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <h4 id=multipolygon>MultiPolygon<a class=headerlink href=#multipolygon title="Permanent link">&para;</a></h4> <p>A <a href=https://tools.ietf.org/html/rfc7946#section-3.1.6>GeoJSON MultiPolygon</a>{:target="<em>blank"} consists of multiple polygons. The "coordinates" member is an array of _Polygon</em> coordinate arrays. </p> <ul> <li>Polygons in the same MultiPolygon may not share edges, they may share coordinates</li> <li>Polygons and rings must not be empty</li> <li>A linear ring defines two regions on the sphere. GDN will always interpret the region of smaller area to be the interior of the ring. This introduces a practical limitation that no polygon may have an outer ring enclosing more than half the Earth's surface</li> <li>Linear rings <strong>must</strong> follow the right-hand rule for orientation (counterclockwise external rings, clockwise internal rings).</li> </ul> <p>Example with two polygons, the second one with a hole:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;MultiPolygon&quot;</span><span class=p>,</span>
    <span class=nt>&quot;coordinates&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>[</span>
            <span class=p>[</span>
                <span class=p>[</span><span class=mf>102.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>103.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>103.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>102.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>102.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>]</span>
            <span class=p>]</span>
        <span class=p>],</span>
        <span class=p>[</span>
            <span class=p>[</span>
                <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>101.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>100.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>]</span>
            <span class=p>],</span>
            <span class=p>[</span>
                <span class=p>[</span><span class=mf>100.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>100.2</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>100.8</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>100.8</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>],</span>
                <span class=p>[</span><span class=mf>100.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>]</span>
            <span class=p>]</span>
        <span class=p>]</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <h4 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h4> <p>ensures that a geo index exists <code>collection.ensureIndex({ type: "geo", fields: [ "location" ] })</code></p> <p>Creates a geospatial index on all documents using <em>location</em> as the path to the coordinates. The value of the attribute has to be an array with at least two numeric values. The array must contain the latitude (first value) and the longitude (second value).</p> <p>All documents, which do not have the attribute path or have a non-conforming value in it, are excluded from the index.</p> <p>A geo index is implicitly sparse, and there is no way to control its sparsity.</p> <p>In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <p>To create a geo index on an array attribute that contains longitude first, set the <em>geoJson</em> attribute to <code>true</code>. This corresponds to the format described in <a href=https://tools.ietf.org/html/rfc7946#section-3.1.1 target=_blank>RFC 7946 Position</a></p> <p><code>collection.ensureIndex({ type: "geo", fields: [ "location" ], geoJson: true })</code></p> <p>To create a geo-spatial index on all documents using <em>latitude</em> and <em>longitude</em> as separate attribute paths, two paths need to be specified in the <em>fields</em> array:</p> <p><code>collection.ensureIndex({ type: "geo", fields: [ "latitude", "longitude" ] })</code></p> <p>In case that the index was successfully created, an object with the index details, including the index-identifier, is returned.</p> <p>ensures that a geo index exists <code>collection.ensureIndex({ type: "geo", fields: [ "location" ] })</code></p> <p>This method is an alias for <em>ensureGeoIndex</em> since geo indexes are always sparse, meaning that documents that do not contain the index attributes or has non-numeric values in the index attributes will not be indexed. <em>ensureGeoConstraint</em> is deprecated and <em>ensureGeoIndex</em> should be used instead.</p> <p>The index does not provide a <code>unique</code> option because of its limited usability. It would prevent identical coordinates from being inserted only, but even a slightly different location (like 1 inch or 1 cm off) would be unique again and not considered a duplicate, although it probably should. The desired threshold for detecting duplicates may vary for every project (including how to calculate the distance even) and needs to be implemented on the application layer as needed. </p> <h2 id=vertex-centric-indexes>Vertex centric indexes<a class=headerlink href=#vertex-centric-indexes title="Permanent link">&para;</a></h2> <p>As mentioned above, the most important indexes for graphs are the edge indexes, indexing the <code>_from</code> and <code>_to</code> attributes of edge collections. They provide very quick access to all edges originating in or arriving at a given vertex, which allows to quickly find all neighbours of a vertex in a graph.</p> <p>In many cases one would like to run more specific queries, for example finding amongst the edges originating in a given vertex only those with the 20 latest time stamps. Exactly this is achieved with "vertex centric indexes". In a sense these are localized indexes for an edge collection, which sit at every single vertex.</p> <p>Technically, they are implemented in GDN as indexes, which sort the complete edge collection first by <code>_from</code> and then by other attributes. If we for example have a skiplist index on the attributes <code>_from</code> and <code>timestamp</code> of an edge collection, we can answer the above question very quickly with a single range lookup in the index.</p> <p>One can create sorted indexes (type "skiplist" and "persistent") that index the special edge attributes <code>_from</code> or <code>_to</code> and additionally other attributes. These are used in graph traversals, when appropriate <code>FILTER</code> statements are found by the optimizer.</p> <p>For example, to create a vertex centric index of the above type, you would simply do</p> <div class=highlight><pre><span></span><code><span class=nx>edges</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=s2>&quot;skiplist&quot;</span><span class=p>,</span> <span class=s2>&quot;fields&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;_from&quot;</span><span class=p>,</span> <span class=s2>&quot;timestamp&quot;</span><span class=p>]});</span>
</code></pre></div> <p>Then, queries like</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>e</span><span class=p>,</span> <span class=nx>p</span> <span class=nx>IN</span> <span class=mf>1..1</span> <span class=nx>OUTBOUND</span> <span class=s2>&quot;V/1&quot;</span> <span class=nx>edges</span>
  <span class=nx>FILTER</span> <span class=nx>e</span><span class=p>.</span><span class=nx>timestamp</span> <span class=nx>ALL</span> <span class=o>&gt;=</span> <span class=s2>&quot;2016-11-09&quot;</span>
  <span class=nx>RETURN</span> <span class=nx>p</span>
</code></pre></div> <p>will be considerably faster in case there are many edges originating in vertex <code>"V/1"</code> but only few with a recent time stamp.</p> <h2 id=index-identifiers-handles>Index Identifiers &amp; Handles<a class=headerlink href=#index-identifiers-handles title="Permanent link">&para;</a></h2> <p>An <code>index handle</code> uniquely identifies an index in the database. It is a string and consists of the collection name and an <code>index identifier</code> separated by a <code>/</code>. The index identifier part is a numeric value that is auto-generated by GDN.</p> <p>A specific index of a collection can be accessed using its <em>index handle</em> or <em>index identifier</em> as follows:</p> <div class=highlight><pre><span></span><code><span class=nx>collection</span><span class=p>.</span><span class=nx>index</span><span class=p>(</span><span class=s2>&quot;&lt;index-handle&gt;&quot;</span><span class=p>);</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>index</span><span class=p>(</span><span class=s2>&quot;&lt;index-identifier&gt;&quot;</span><span class=p>);</span>
<span class=nx>_index</span><span class=p>(</span><span class=s2>&quot;&lt;index-handle&gt;&quot;</span><span class=p>);</span>
</code></pre></div> <p>For example: Assume that the index handle, which is stored in the <code>_id</code> attribute of the index, is <code>demo/362549736</code> and the index was created in a collection named <code>demo</code>. Then this index can be accessed as:</p> <div class=highlight><pre><span></span><code><span class=nx>demo</span><span class=p>.</span><span class=nx>index</span><span class=p>(</span><span class=s2>&quot;demo/362549736&quot;</span><span class=p>);</span>
</code></pre></div> <p>Because the index handle is unique within the database, you can leave out the <em>collection</em> and use the shortcut:</p> <div class=highlight><pre><span></span><code><span class=nx>_index</span><span class=p>(</span><span class=s2>&quot;demo/362549736&quot;</span><span class=p>);</span>
</code></pre></div> <h2 id=collection-methods>Collection Methods<a class=headerlink href=#collection-methods title="Permanent link">&para;</a></h2> <p><strong>Listing all indexes of a collection:</strong></p> <p><code>getIndexes()</code> - returns information about the indexes</p> <p>Returns an array of all indexes defined for the collection. Note that <code>_key</code> implicitly has an index assigned to it.</p> <p><strong>Creating an index:</strong></p> <p>Indexes should be created using the general method <code>ensureIndex</code>. </p> <p>ensures that an index exists <code>collection.ensureIndex(index-description)</code></p> <p>Ensures that an index according to the <code>index-description</code> exists. A new index will be created if none exists with the given description.</p> <p>The <code>index-description</code> must contain at least a <code>type</code> attribute. Other attributes may be necessary, depending on the index type.</p> <p><strong>type</strong> can be one of the following values:</p> <ul> <li><code>hash</code>: hash index</li> <li><code>skiplist</code>: skiplist index</li> <li><code>fulltext</code>: fulltext index</li> <li><code>geo</code>: geo index, with one or two attributes</li> </ul> <p><strong>name</strong> can be a string. Index names are subject to the same character restrictions as collection names. If omitted, a name will be auto-generated so that it is unique with respect to the collection, e.g. <code>idx_832910498</code>.</p> <p><strong>sparse</strong> can be <code>true</code> or <code>false</code>.</p> <p>For <code>hash</code>, and *<code>skiplist</code> the sparsity can be controlled, <code>fulltext</code> and <code>geo</code> are <a href=which-index-to-use-when>sparse</a> by definition.</p> <p><strong>unique</strong> can be <code>true</code> or <code>false</code> and is supported by <code>hash</code> or <code>skiplist</code></p> <p>Calling this method returns an index object. Whether or not the index object existed before the call is indicated in the return attribute <em>isNewlyCreated</em>.</p> <p><strong>deduplicate</strong> can be <code>true</code> or <code>false</code> and is supported by array indexes of type <code>hash</code> or <code>skiplist</code>. It controls whether inserting duplicate index values from the same document into a unique array index will lead to a unique constraint error or not. The default value is <code>true</code>, so only a single instance of each non-unique index value will be inserted into the index per document. Trying to insert a value into the index that already exists in the index will always fail, regardless of the value of this attribute.</p> <p><strong>Examples</strong></p> <div class=highlight><pre><span></span><code>test.ensureIndex<span class=o>({</span> type: <span class=s2>&quot;hash&quot;</span>, fields: <span class=o>[</span> <span class=s2>&quot;a&quot;</span> <span class=o>]</span>, sparse: <span class=nb>true</span> <span class=o>})</span><span class=p>;</span>
test.ensureIndex<span class=o>({</span> type: <span class=s2>&quot;hash&quot;</span>, fields: <span class=o>[</span> <span class=s2>&quot;a&quot;</span>, <span class=s2>&quot;b&quot;</span> <span class=o>]</span>, unique: <span class=nb>true</span> <span class=o>})</span><span class=p>;</span>
</code></pre></div> <p><strong>Dropping an index:</strong></p> <p>drops an index <code>collection.dropIndex(index)</code></p> <p>Drops the index. If the index does not exist, then <code>false</code> is returned. If the index existed and was dropped, then <code>true</code> is returned. Note that you cannot drop some special indexes (e.g. the primary index of a collection or the edge index of an edge collection).</p> <p><code>collection.dropIndex(index-handle)</code></p> <p>Same as above. Instead of an index an index handle can be given.</p> <h2 id=geofabric-methods>GeoFabric Methods<a class=headerlink href=#geofabric-methods title="Permanent link">&para;</a></h2> <p><strong>Fetching an index by handle</strong></p> <p>finds an index <code>_index(index-handle)</code></p> <p>Returns the index with <code>index-handle</code> or null if no such index exists.</p> <p><strong>Dropping an index:</strong></p> <p>drops an index <code>_dropIndex(index)</code></p> <p>Drops the <code>index</code>. If the index does not exist, then <code>false</code> is returned. If the index existed and was dropped, then <code>true</code> is returned.</p> <p><code>_dropIndex(index-handle)</code></p> <p>Drops the index with <code>index-handle</code>.</p> <p><strong>Revalidating whether an index is used:</strong></p> <p>finds an index</p> <p>So you've created an index, and since its maintainance isn't for free, you definitely want to know whether your query can utilize it.</p> <p>You can use explain to verify whether <strong>skiplists</strong> or <strong>hash indexes</strong> are used.</p> <h2 id=creating-indexes-in-background>Creating Indexes in Background<a class=headerlink href=#creating-indexes-in-background title="Permanent link">&para;</a></h2> <p>Creating new indexes is by default done under an exclusive collection lock. This means that the collection (or the respective shards) are not available for write operations as long as the index is created. This "foreground" index creation can be undesirable, if you have to perform it on a live system without a dedicated maintenance window.</p> <p>Indexes can also be created in "background", not using an exclusive lock during the entire index creation. The collection remains basically available, so that other CRUD operations can run on the collection while the index is being created. This can be achieved by setting the <em>inBackground</em> attribute when creating an index.</p> <p>To create an index in the background, just specify <code>inBackground: true</code>, like in the following examples:</p> <div class=highlight><pre><span></span><code><span class=c1>// create the hash index in the background</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;value&quot;</span> <span class=p>],</span> <span class=nx>unique</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;hash&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;email&quot;</span> <span class=p>],</span> <span class=nx>unique</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>

<span class=c1>// skiplist indexes work also of course</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span> <span class=o>:</span><span class=s2>&quot;skiplist&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;abc&quot;</span><span class=p>,</span> <span class=s2>&quot;cdef&quot;</span><span class=p>],</span> <span class=nx>unique</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span> <span class=o>:</span><span class=s2>&quot;skiplist&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;abc&quot;</span><span class=p>,</span> <span class=s2>&quot;cdef&quot;</span><span class=p>],</span> <span class=nx>sparse</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>

<span class=c1>// also supported on fulltext indexes</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;geo&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;latitude&quot;</span><span class=p>,</span> <span class=s2>&quot;longitude&quot;</span><span class=p>],</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;geo&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;latitude&quot;</span><span class=p>,</span> <span class=s2>&quot;longitude&quot;</span><span class=p>],</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
<span class=nx>collection</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&quot;fulltext&quot;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&quot;text&quot;</span> <span class=p>],</span> <span class=nx>minLength</span><span class=o>:</span> <span class=mf>4</span><span class=p>,</span> <span class=nx>inBackground</span><span class=o>:</span> <span class=kc>true</span> <span class=p>})</span>
</code></pre></div> <p><strong>Behavior:</strong></p> <p>Indexes that are still in the build process will not be visible via the GDN APIs. Nevertheless it is not possible to create the same index twice via the <em>ensureIndex</em> API while an index is still begin created. AQL queries also will not use these indexes until the index reports back as fully created. Note that the initial <em>ensureIndex</em> call or HTTP request will still block until the index is completely ready. Existing single-threaded client programs can thus safely set the <em>inBackground</em> option to <em>true</em> and continue to work as before.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Should you be building an index in the background you cannot rename or drop the collection. These operations will block until the index creation is finished. This is equally the case with foreground indexing.</p> </div> <p><strong>Performance:</strong></p> <p>Background index creation might be slower than the "foreground" index creation and require more RAM. Under a write heavy load (specifically many remove, update or replace operations), the background index creation needs to keep a list of removed documents in RAM. This might become unsustainable if this list grows to tens of millions of entries.</p> <p>Building an index is always a write heavy operation (internally), it is always a good idea to build indexes during times with less load.</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <p>When in doubt about whether and which indexes will be used for executing a given C8QL query, click the <code>Explain</code> button in the web interface in the <code>Queries</code> view or use the <code>explain()</code> method for the statement as follows:</p> <div class=highlight><pre><span></span><code><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&quot;FOR doc IN collection FILTER doc.value &gt; 42 RETURN doc&quot;</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>createStatement</span><span class=p>(</span><span class=nx>query</span><span class=p>);</span>
<span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>();</span>
</code></pre></div> <p>The <code>explain()</code> command will return a detailed JSON representation of the query's execution plan. The JSON explain output is intended to be used by code. To get a human-readable and much more compact explanation of the query, there is an explainer tool:</p> <div class=highlight><pre><span></span><code><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&quot;FOR doc IN collection FILTER doc.value &gt; 42 RETURN doc&quot;</span><span class=p>;</span>
<span class=nx>require</span><span class=p>(</span><span class=s2>&quot;@c8db_db/c8ql/explainer&quot;</span><span class=p>).</span><span class=nx>explain</span><span class=p>(</span><span class=nx>query</span><span class=p>);</span>
</code></pre></div> <p>If any of the explain methods shows that a query is not using indexes, the following steps may help:</p> <ul> <li> <p>check if the attribute names in the query are correctly spelled. In a schema-free database, documents in the same collection can have varying structures. There is no such thing as a <code>non-existing attribute</code> error. A query that refers to attribute names not present in any of the documents will not return an error, and obviously will not benefit from indexes.</p> </li> <li> <p>check the return value of the <code>getIndexes()</code> method for the collections used in the query and validate that indexes are actually present on the attributes used in the query's filter conditions. </p> </li> <li> <p>if indexes are present but not used by the query, the indexes may have the wrong type. For example, a hash index will only be used for equality comparisons (i.e. <code>==</code>) but not for other comparison types such as <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>. Additionally hash indexes will only be used if all of the index attributes are used in the query's FILTER conditions. A skiplist index will only be used if at least its first attribute is used in a FILTER condition. If additionally of the skiplist index attributes are specified in the query (from left-to-right), they may also be used and allow to filter more documents.</p> </li> <li> <p>using indexed attributes as function parameters or in arbitrary expressions will likely lead to the index on the attribute not being used. For example, the following queries will not use an index on <code>value</code>:</p> </li> </ul> <div class=highlight><pre><span></span><code>      <span class=k>FOR</span> <span class=n>doc</span> <span class=k>IN</span> <span class=n>collection</span> <span class=n>FILTER</span> <span class=n>TO_NUMBER</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>value</span><span class=p>)</span> <span class=o>==</span> <span class=mi>42</span> <span class=k>RETURN</span> <span class=n>doc</span>
      <span class=k>FOR</span> <span class=n>doc</span> <span class=k>IN</span> <span class=n>collection</span> <span class=n>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>==</span> <span class=mi>42</span> <span class=k>RETURN</span> <span class=n>doc</span>
</code></pre></div> <p>In these cases the queries should be rewritten so that only the index attribute is present on one side of the operator, or additional filters and indexes should be used to restrict the amount of documents otherwise.</p> <ul> <li> <p>certain C8QL functions such as <code>WITHIN()</code> or <code>FULLTEXT()</code> do utilize indexes internally, but their use is not mentioned in the query explanation for functions in general. These functions will raise query errors (at runtime) if no suitable index is present for the collection in question.</p> </li> <li> <p>the query optimizer will in general pick one index per collection in a query. It can pick more than one index per collection if the FILTER condition contains multiple branches combined with logical <code>OR</code>. For example, the following queries can use indexes:</p> </li> </ul> <div class=highlight><pre><span></span><code>      <span class=k>FOR</span> <span class=n>doc</span> <span class=k>IN</span> <span class=n>collection</span> <span class=n>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=mi>42</span> <span class=o>||</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=mi>23</span> <span class=k>RETURN</span> <span class=n>doc</span>
      <span class=k>FOR</span> <span class=n>doc</span> <span class=k>IN</span> <span class=n>collection</span> <span class=n>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=mi>42</span> <span class=o>||</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>==</span> <span class=mi>23</span> <span class=k>RETURN</span> <span class=n>doc</span>
      <span class=k>FOR</span> <span class=n>doc</span> <span class=k>IN</span> <span class=n>collection</span> <span class=n>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=mi>42</span> <span class=o>||</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;</span> <span class=mi>23</span> <span class=k>RETURN</span> <span class=n>doc</span>
</code></pre></div> <p>The two <code>OR</code>s in the first query will be converted to an <code>IN</code> list, and if there is a suitable index on <code>value1</code>, it will be used. The second query requires two separate indexes on <code>value1</code> and <code>value2</code> and will use them if present. The third query can use the indexes on <code>value1</code> and <code>value2</code> when they are sorted.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../index-basics/ title="Index Basics" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Index Basics </div> </div> </a> <a href=../index-utilization/ title="Index Utilization" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Index Utilization </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2017 - 2022 Macrometa Corp </div> </div> <div class=md-footer-social> <a href=https://github.com/macrometacorp target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/macrometa target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.linkedin.com/company/macrometa-corporation/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.568ba93b.min.js></script> <script src=../../../assets/javascripts/bundle.2a81e305.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ["tabs", "instant"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>