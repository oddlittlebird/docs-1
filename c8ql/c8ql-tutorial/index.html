<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Access data instantly across the globe in your Apps & APIs for exceptional performance and scale. <br> One interface, multiple data models!"><link href=https://macrometa.com/docs/c8ql/c8ql-tutorial/ rel=canonical><meta name=author content=Durga><link rel="shortcut icon" href=../../assets/favicon.ico><meta name=generator content="mkdocs-1.2.3, mkdocs-material-5.4.0"><title>C8QL Tutorial - Macrometa Docs</title><link rel=stylesheet href=../../assets/stylesheets/main.7efdba89.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.5447f842.min.css><meta name=theme-color content=#3f51b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c8ql-tutorial class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://macrometa.com/docs/ title="Macrometa Docs" class="md-header-nav__button md-logo" aria-label="Macrometa Docs"> <svg width=400 height=400 viewbox="0 0 400 400" fill=none xmlns=http://www.w3.org/2000/svg> <path fill=white d="M395.248 194.382L262.465 175.123C258.36 174.499 256.307 169.773 258.717 166.384L300.569 107.178C303.425 103.076 300.123 98.3504 296.018 98.3504C294.947 98.3504 293.876 98.7071 292.806 99.4204L233.553 141.239C232.571 141.953 231.411 142.309 230.34 142.309C227.753 142.309 225.254 140.437 224.808 137.495L205.533 4.81506C205.086 1.60507 202.499 0 200 0C197.501 0 194.914 1.60507 194.467 4.81506L175.192 137.584C174.746 140.526 172.247 142.399 169.66 142.399C168.589 142.399 167.429 142.042 166.447 141.418L108.533 100.847C107.462 100.134 106.392 99.7771 105.321 99.7771C101.305 99.7771 97.9142 104.503 100.77 108.605L141.371 166.474C143.781 169.862 141.729 174.588 137.624 175.212L4.75181 194.472C-1.58394 195.363 -1.58394 204.547 4.75181 205.528L137.624 224.788C141.729 225.412 143.781 230.138 141.371 233.527L101.305 290.86C98.449 294.873 101.84 299.688 105.856 299.688C106.927 299.688 107.997 299.331 109.068 298.618L166.447 258.582C167.429 257.869 168.589 257.602 169.66 257.602C172.247 257.602 174.746 259.474 175.192 262.416L194.467 395.185C194.914 398.395 197.501 400 200 400C202.499 400 205.086 398.395 205.533 395.185L224.808 262.506C225.254 259.563 227.753 257.691 230.34 257.691C231.411 257.691 232.571 258.047 233.553 258.761L292.806 300.491C293.876 301.293 294.947 301.561 296.018 301.561C300.123 301.561 303.425 296.745 300.569 292.733L258.717 233.616C256.307 230.228 258.36 225.502 262.465 224.877L395.248 205.618C401.584 204.548 401.584 195.363 395.248 194.382Z"/> </svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Macrometa Docs </span> <span class="md-header-nav__topic md-ellipsis"> C8QL Tutorial </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/Macrometacorp/docs/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../quickstart/ class=md-tabs__link> Essentials </a> </li> <li class=md-tabs__item> <a href=../../keyvalue/quickstart/ class=md-tabs__link> Collections </a> </li> <li class=md-tabs__item> <a href=../../search/Overview/ class=md-tabs__link> Search </a> </li> <li class=md-tabs__item> <a href=../../restql/concepts/ class=md-tabs__link> Query Workers </a> </li> <li class=md-tabs__item> <a href=../../streams/quickstart/ class=md-tabs__link> Streams </a> </li> <li class=md-tabs__item> <a href=../../cep/quickstart/ class=md-tabs__link> Stream Workers </a> </li> <li class=md-tabs__item> <a href=../introduction/ class="md-tabs__link md-tabs__link--active"> C8 Query Language </a> </li> <li class=md-tabs__item> <a href=../../demos/address-book/ class=md-tabs__link> Demos & Tutorials </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://macrometa.com/docs/ title="Macrometa Docs" class="md-nav__button md-logo" aria-label="Macrometa Docs"> <svg width=400 height=400 viewbox="0 0 400 400" fill=none xmlns=http://www.w3.org/2000/svg> <path fill=white d="M395.248 194.382L262.465 175.123C258.36 174.499 256.307 169.773 258.717 166.384L300.569 107.178C303.425 103.076 300.123 98.3504 296.018 98.3504C294.947 98.3504 293.876 98.7071 292.806 99.4204L233.553 141.239C232.571 141.953 231.411 142.309 230.34 142.309C227.753 142.309 225.254 140.437 224.808 137.495L205.533 4.81506C205.086 1.60507 202.499 0 200 0C197.501 0 194.914 1.60507 194.467 4.81506L175.192 137.584C174.746 140.526 172.247 142.399 169.66 142.399C168.589 142.399 167.429 142.042 166.447 141.418L108.533 100.847C107.462 100.134 106.392 99.7771 105.321 99.7771C101.305 99.7771 97.9142 104.503 100.77 108.605L141.371 166.474C143.781 169.862 141.729 174.588 137.624 175.212L4.75181 194.472C-1.58394 195.363 -1.58394 204.547 4.75181 205.528L137.624 224.788C141.729 225.412 143.781 230.138 141.371 233.527L101.305 290.86C98.449 294.873 101.84 299.688 105.856 299.688C106.927 299.688 107.997 299.331 109.068 298.618L166.447 258.582C167.429 257.869 168.589 257.602 169.66 257.602C172.247 257.602 174.746 259.474 175.192 262.416L194.467 395.185C194.914 398.395 197.501 400 200 400C202.499 400 205.086 398.395 205.533 395.185L224.808 262.506C225.254 259.563 227.753 257.691 230.34 257.691C231.411 257.691 232.571 258.047 233.553 258.761L292.806 300.491C293.876 301.293 294.947 301.561 296.018 301.561C300.123 301.561 303.425 296.745 300.569 292.733L258.717 233.616C256.307 230.228 258.36 225.502 262.465 224.877L395.248 205.618C401.584 204.548 401.584 195.363 395.248 194.382Z"/> </svg> </a> Macrometa Docs </label> <div class=md-nav__source> <a href=https://github.com/Macrometacorp/docs/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Essentials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Essentials data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Essentials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/ title=Quickstart class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../essentials/ title=Essentials class=md-nav__link> Essentials </a> </li> <li class=md-nav__item> <a href=../../authentication/ title=Authentication class=md-nav__link> Authentication </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../quotas/ title="Quotas and Limits" class=md-nav__link> Quotas and Limits </a> </li> <li class=md-nav__item> <a href=../../apikeys/ title=Drivers class=md-nav__link> Drivers </a> </li> <li class=md-nav__item> <a href=../../credits/ title=Credits class=md-nav__link> Credits </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Collections <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Collections data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Collections </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1 type=checkbox id=nav-3-1> <label class=md-nav__link for=nav-3-1> Key Value <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Key Value" data-md-level=2> <label class=md-nav__title for=nav-3-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Key Value </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../keyvalue/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1-2 type=checkbox id=nav-3-1-2> <label class=md-nav__link for=nav-3-1-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=nav-3-1-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../keyvalue/tutorials/using-rest-api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../keyvalue/tutorials/bulk-update-restql/ title="Bulk Update with RestQL" class=md-nav__link> Bulk Update with RestQL </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Documents <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Documents data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Documents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../documents/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-2 type=checkbox id=nav-3-2-2> <label class=md-nav__link for=nav-3-2-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=nav-3-2-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../documents/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../documents/tutorials/working-with-documents/ title="Working with Documents" class=md-nav__link> Working with Documents </a> </li> <li class=md-nav__item> <a href=../../documents/tutorials/bulk-update-restql/ title="Bulk Update with RestQL" class=md-nav__link> Bulk Update with RestQL </a> </li> <li class=md-nav__item> <a href=../../documents/tutorials/using-realtime-updates/ title="Realtime Updates" class=md-nav__link> Realtime Updates </a> </li> <li class=md-nav__item> <a href=../../documents/tutorials/maps_sets_sortedsets/ title="Maps, Sets, SortedSets" class=md-nav__link> Maps, Sets, SortedSets </a> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> C8QL Tutorial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="C8QL Tutorial" class="md-nav__link md-nav__link--active"> C8QL Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-3 type=checkbox id=nav-3-2-3> <label class=md-nav__link for=nav-3-2-3> Indexing <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Indexing data-md-level=3> <label class=md-nav__title for=nav-3-2-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Indexing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../documents/indexing/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../documents/indexing/index-basics/ title="Index Basics" class=md-nav__link> Index Basics </a> </li> <li class=md-nav__item> <a href=../../documents/indexing/working-with-indexes/ title="Working with Indexes" class=md-nav__link> Working with Indexes </a> </li> <li class=md-nav__item> <a href=../../documents/indexing/index-utilization/ title="Index Utilization" class=md-nav__link> Index Utilization </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-4 type=checkbox id=nav-3-2-4> <label class=md-nav__link for=nav-3-2-4> GeoSpatial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=GeoSpatial data-md-level=3> <label class=md-nav__title for=nav-3-2-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> GeoSpatial </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../geospatial/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class=md-nav__item> <a href=../../geospatial/tutorial/ title=Tutorial class=md-nav__link> Tutorial </a> </li> <li class=md-nav__item> <a href=../../documents/indexing/working-with-indexes/#geo-spatial-indexes title=Indexes class=md-nav__link> Indexes </a> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> C8QL Tutorial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="C8QL Tutorial" class="md-nav__link md-nav__link--active"> C8QL Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> DynamoMode <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=DynamoMode data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> DynamoMode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dynamo/using-aws-cli/ title="Using AWS Console CLI" class=md-nav__link> Using AWS Console CLI </a> </li> <li class=md-nav__item> <a href=../../dynamo/using-aws-js-browser/ title="AWS Javascript SDK (browser)" class=md-nav__link> AWS Javascript SDK (browser) </a> </li> <li class=md-nav__item> <a href=../../dynamo/using-aws-js-nodejs/ title="AWS Javascript SDK (nodejs)" class=md-nav__link> AWS Javascript SDK (nodejs) </a> </li> <li class=md-nav__item> <a href=../../dynamo/using-aws-boto3/ title="AWS Python SDK" class=md-nav__link> AWS Python SDK </a> </li> <li class=md-nav__item> <a href=../../dynamo/using-mmdynamo-browser/ title="mmdynamo Javascript SDK (browser)" class=md-nav__link> mmdynamo Javascript SDK (browser) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> Graphs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Graphs data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Graphs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../graphs/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../graphs/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4-3 type=checkbox id=nav-3-4-3> <label class=md-nav__link for=nav-3-4-3> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=nav-3-4-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../graphs/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../graphs/tutorials/graph-queries/ title="Graph Queries" class=md-nav__link> Graph Queries </a> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> C8QL Tutorial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="C8QL Tutorial" class="md-nav__link md-nav__link--active"> C8QL Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Search <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Search data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Search </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../search/Overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../search/Views/ title=Views class=md-nav__link> Views </a> </li> <li class=md-nav__item> <a href=../../search/Analyzers/ title=Analyzers class=md-nav__link> Analyzers </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class=md-nav__link for=nav-4-4> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-4-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../documents/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> C8QL Tutorial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="C8QL Tutorial" class="md-nav__link md-nav__link--active"> C8QL Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Query Workers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Query Workers" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Query Workers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../restql/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-5-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../restql/tutorial/ title="RestQL Tutorial" class=md-nav__link> RestQL Tutorial </a> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> C8QL Tutorial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="C8QL Tutorial" class="md-nav__link md-nav__link--active"> C8QL Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Streams <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Streams data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Streams </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../streams/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../streams/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-3 type=checkbox id=nav-6-3> <label class=md-nav__link for=nav-6-3> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-6-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../streams/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../streams/tutorials/pub-sub-streams/ title="Pub-Sub with Streams" class=md-nav__link> Pub-Sub with Streams </a> </li> <li class=md-nav__item> <a href=../../streams/tutorials/using-realtime-updates/ title="Realtime Updates" class=md-nav__link> Realtime Updates </a> </li> <li class=md-nav__item> <a href=../../streams/tutorials/integrating-plugins/ title="Integrating Plugins" class=md-nav__link> Integrating Plugins </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Stream Workers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Stream Workers" data-md-level=1> <label class=md-nav__title for=nav-7> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Stream Workers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cep/quickstart/ title="Quick Start" class=md-nav__link> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-2 type=checkbox id=nav-7-2> <label class=md-nav__link for=nav-7-2> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=nav-7-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cep/tutorials/using_rest_api/ title="Using Rest API" class=md-nav__link> Using Rest API </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/create-stream-app/ title="Create Stream App" class=md-nav__link> Create Stream App </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/consuming-data/ title="Consuming Data" class=md-nav__link> Consuming Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/transforming-data/ title="Transforming Data" class=md-nav__link> Transforming Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/enriching-data/ title="Enriching Data" class=md-nav__link> Enriching Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/filtering-data/ title="Filtering Data" class=md-nav__link> Filtering Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/summarizing-data/ title="Summarizing Data" class=md-nav__link> Summarizing Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/correlating-data/ title="Correlating Data" class=md-nav__link> Correlating Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/publishing-data/ title="Publishing Data" class=md-nav__link> Publishing Data </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/executing-scripts/ title="Executing Scripts" class=md-nav__link> Executing Scripts </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3 type=checkbox id=nav-7-3> <label class=md-nav__link for=nav-7-3> Reference <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Reference data-md-level=2> <label class=md-nav__title for=nav-7-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cep/reference/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../cep/reference/basics/ title=Basics class=md-nav__link> Basics </a> </li> <li class=md-nav__item> <a href=../../cep/reference/values-n-types/ title="Values & Types" class=md-nav__link> Values & Types </a> </li> <li class=md-nav__item> <a href=../../cep/reference/data-cleansing/ title="Data Cleansing" class=md-nav__link> Data Cleansing </a> </li> <li class=md-nav__item> <a href=../../cep/tutorials/enriching-data/ title="Enriching Data" class=md-nav__link> Enriching Data </a> </li> <li class=md-nav__item> <a href=../../cep/reference/data-transformation/ title="Data Transformations" class=md-nav__link> Data Transformations </a> </li> <li class=md-nav__item> <a href=../../cep/reference/data-summarization/ title="Data Summarizations" class=md-nav__link> Data Summarizations </a> </li> <li class=md-nav__item> <a href=../../cep/reference/patterns-n-trends/ title="Patterns & Trends" class=md-nav__link> Patterns & Trends </a> </li> <li class=md-nav__item> <a href=../../cep/reference/data-pipelining/ title="Data Pipelines" class=md-nav__link> Data Pipelines </a> </li> <li class=md-nav__item> <a href=../../cep/reference/error-handling/ title="Error Handling" class=md-nav__link> Error Handling </a> </li> <li class=md-nav__item> <a href=../../cep/reference/geospatial/ title=GeoSpatial class=md-nav__link> GeoSpatial </a> </li> <li class=md-nav__item> <a href=../../cep/reference/query-guide/ title="Query Guide" class=md-nav__link> Query Guide </a> </li> <li class=md-nav__item> <a href=../../cep/reference/functions/ title=Functions class=md-nav__link> Functions </a> </li> <li class=md-nav__item> <a href=../../cep/reference/query-language-update/ title="Query Language Syntax Update" class=md-nav__link> Query Language Syntax Update </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-15 type=checkbox id=nav-7-3-15> <label class=md-nav__link for=nav-7-3-15> Extensions <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Extensions data-md-level=3> <label class=md-nav__title for=nav-7-3-15> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-15-1 type=checkbox id=nav-7-3-15-1> <label class=md-nav__link for=nav-7-3-15-1> Execution <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Execution data-md-level=4> <label class=md-nav__title for=nav-7-3-15-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Execution </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/context/ title=Context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/map/ title=Map class=md-nav__link> Map </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/json/ title=Json class=md-nav__link> Json </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/list/ title=List class=md-nav__link> List </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/math/ title=Math class=md-nav__link> Math </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/regex/ title=Regex class=md-nav__link> Regex </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/reorder/ title=Reorder class=md-nav__link> Reorder </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/time/ title=Time class=md-nav__link> Time </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/unique/ title=Unique class=md-nav__link> Unique </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/execution/streamingml/ title="Streaming ML" class=md-nav__link> Streaming ML </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-15-2 type=checkbox id=nav-7-3-15-2> <label class=md-nav__link for=nav-7-3-15-2> Connectors <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Connectors data-md-level=4> <label class=md-nav__title for=nav-7-3-15-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Connectors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cep/reference/extensions/io/http/ title=HTTP class=md-nav__link> HTTP </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/io/gcp-pubsub/ title="Google Pub-Sub" class=md-nav__link> Google Pub-Sub </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/io/s3/ title="AWS S3" class=md-nav__link> AWS S3 </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/io/kafka/ title=Kafka class=md-nav__link> Kafka </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3-15-3 type=checkbox id=nav-7-3-15-3> <label class=md-nav__link for=nav-7-3-15-3> Format Mappers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Format Mappers" data-md-level=4> <label class=md-nav__title for=nav-7-3-15-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Format Mappers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cep/reference/extensions/mappers/json/ title=Json class=md-nav__link> Json </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/mappers/csv/ title=CSV class=md-nav__link> CSV </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/mappers/keyvalue/ title=Key-Value class=md-nav__link> Key-Value </a> </li> <li class=md-nav__item> <a href=../../cep/reference/extensions/mappers/text/ title=Text class=md-nav__link> Text </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8 type=checkbox id=nav-8 checked> <label class=md-nav__link for=nav-8> C8 Query Language <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="C8 Query Language" data-md-level=1> <label class=md-nav__title for=nav-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> C8 Query Language </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> C8QL Tutorial <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="C8QL Tutorial" class="md-nav__link md-nav__link--active"> C8QL Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ title="Additional Examples" class=md-nav__link> Additional Examples </a> </li> <li class=md-nav__item> <a href=../coming-from-sql/ title="Coming from SQL" class=md-nav__link> Coming from SQL </a> </li> <li class=md-nav__item> <a href=../fundamentals/ title=Fundamentals class=md-nav__link> Fundamentals </a> </li> <li class=md-nav__item> <a href=../operators/ title=Operators class=md-nav__link> Operators </a> </li> <li class=md-nav__item> <a href=../data-queries/ title="Data Queries" class=md-nav__link> Data Queries </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-8 type=checkbox id=nav-8-8> <label class=md-nav__link for=nav-8-8> Examples <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Examples data-md-level=2> <label class=md-nav__title for=nav-8-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../examples/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../examples/counting/ title=Counting class=md-nav__link> Counting </a> </li> <li class=md-nav__item> <a href=../examples/data-modification-queries/ title="Date Modification Queries" class=md-nav__link> Date Modification Queries </a> </li> <li class=md-nav__item> <a href=../examples/diffing-documents/ title="Diffing Documents" class=md-nav__link> Diffing Documents </a> </li> <li class=md-nav__item> <a href=../examples/dynamic-attribute-names/ title="Dynamic Attribute Names" class=md-nav__link> Dynamic Attribute Names </a> </li> <li class=md-nav__item> <a href=../examples/grouping/ title=Grouping class=md-nav__link> Grouping </a> </li> <li class=md-nav__item> <a href=../examples/joins/ title=Joins class=md-nav__link> Joins </a> </li> <li class=md-nav__item> <a href=../examples/multiple-path-search/ title="Multiple Path Search" class=md-nav__link> Multiple Path Search </a> </li> <li class=md-nav__item> <a href=../examples/projections-and-filters/ title="Projections and Filters" class=md-nav__link> Projections and Filters </a> </li> <li class=md-nav__item> <a href=../examples/queries-without-collections/ title="Queries Without Collections" class=md-nav__link> Queries Without Collections </a> </li> <li class=md-nav__item> <a href=../examples/remove-vertex/ title="Remove Vertex" class=md-nav__link> Remove Vertex </a> </li> <li class=md-nav__item> <a href=../examples/subqueries/ title=Sub-Queries class=md-nav__link> Sub-Queries </a> </li> <li class=md-nav__item> <a href=../examples/traversals/ title=Traversals class=md-nav__link> Traversals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-9 type=checkbox id=nav-8-9> <label class=md-nav__link for=nav-8-9> Operations <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Operations data-md-level=2> <label class=md-nav__title for=nav-8-9> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../operations/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../operations/for/ title=FOR class=md-nav__link> FOR </a> </li> <li class=md-nav__item> <a href=../operations/return/ title=RETURN class=md-nav__link> RETURN </a> </li> <li class=md-nav__item> <a href=../operations/filter/ title=FILTER class=md-nav__link> FILTER </a> </li> <li class=md-nav__item> <a href=../operations/search/ title=SEARCH class=md-nav__link> SEARCH </a> </li> <li class=md-nav__item> <a href=../operations/sort/ title=SORT class=md-nav__link> SORT </a> </li> <li class=md-nav__item> <a href=../operations/limit/ title=LIMIT class=md-nav__link> LIMIT </a> </li> <li class=md-nav__item> <a href=../operations/let/ title=LET class=md-nav__link> LET </a> </li> <li class=md-nav__item> <a href=../operations/collect/ title=COLLECT class=md-nav__link> COLLECT </a> </li> <li class=md-nav__item> <a href=../operations/remove/ title=REMOVE class=md-nav__link> REMOVE </a> </li> <li class=md-nav__item> <a href=../operations/update/ title=UPDATE class=md-nav__link> UPDATE </a> </li> <li class=md-nav__item> <a href=../operations/replace/ title=REPLACE class=md-nav__link> REPLACE </a> </li> <li class=md-nav__item> <a href=../operations/insert/ title=INSERT class=md-nav__link> INSERT </a> </li> <li class=md-nav__item> <a href=../operations/upsert/ title=UPSERT class=md-nav__link> UPSERT </a> </li> <li class=md-nav__item> <a href=../operations/with/ title=WITH class=md-nav__link> WITH </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-10 type=checkbox id=nav-8-10> <label class=md-nav__link for=nav-8-10> Functions <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Functions data-md-level=2> <label class=md-nav__title for=nav-8-10> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../functions/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../functions/string/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../functions/numeric/ title=Numeric class=md-nav__link> Numeric </a> </li> <li class=md-nav__item> <a href=../functions/date/ title=Date class=md-nav__link> Date </a> </li> <li class=md-nav__item> <a href=../functions/array/ title=Array class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../functions/document/ title=Document class=md-nav__link> Document </a> </li> <li class=md-nav__item> <a href=../functions/geo/ title=Geo class=md-nav__link> Geo </a> </li> <li class=md-nav__item> <a href=../functions/fulltext/ title=Fulltext class=md-nav__link> Fulltext </a> </li> <li class=md-nav__item> <a href=../functions/search/ title=Search class=md-nav__link> Search </a> </li> <li class=md-nav__item> <a href=../functions/miscellaneous/ title=Miscellaneous class=md-nav__link> Miscellaneous </a> </li> <li class=md-nav__item> <a href=../functions/type-cast/ title="Type Check & Cast" class=md-nav__link> Type Check & Cast </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-11 type=checkbox id=nav-8-11> <label class=md-nav__link for=nav-8-11> Graphs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Graphs data-md-level=2> <label class=md-nav__title for=nav-8-11> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Graphs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../graphs/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../graphs/shortest-path/ title="Shortest Path" class=md-nav__link> Shortest Path </a> </li> <li class=md-nav__item> <a href=../graphs/k-shortest-paths/ title="K Shortest Paths" class=md-nav__link> K Shortest Paths </a> </li> <li class=md-nav__item> <a href=../graphs/traversals/ title=Traversals class=md-nav__link> Traversals </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../array-operators/ title="Array Operators" class=md-nav__link> Array Operators </a> </li> <li class=md-nav__item> <a href=../common-errors/ title="Common Errors" class=md-nav__link> Common Errors </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> Demos & Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Demos & Tutorials" data-md-level=1> <label class=md-nav__title for=nav-9> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Demos & Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../demos/address-book/ title="Address Book" class=md-nav__link> Address Book </a> </li> <li class=md-nav__item> <a href=../../demos/crypto-trading/ title="Crypto Trading" class=md-nav__link> Crypto Trading </a> </li> <li class=md-nav__item> <a href=../../demos/meta-flix/ title=MetaFlix class=md-nav__link> MetaFlix </a> </li> <li class=md-nav__item> <a href=../../demos/realtime-log-analytics/ title="Realtime Log Analytics" class=md-nav__link> Realtime Log Analytics </a> </li> <li class=md-nav__item> <a href=../../demos/data-privacy/ title="Data Privacy" class=md-nav__link> Data Privacy </a> </li> <li class=md-nav__item> <a href=../../demos/cf-bookstore/ title=Bookstore class=md-nav__link> Bookstore </a> </li> <li class=md-nav__item> <a href=../../demos/cf-forever42/ title="Forever 42" class=md-nav__link> Forever 42 </a> </li> <li class=md-nav__item> <a href=../../demos/fashion-store/ title="Fashion store and Fashion Store Dynamo" class=md-nav__link> Fashion store and Fashion Store Dynamo </a> </li> <li class=md-nav__item> <a href=../../demos/fleet-management/ title="Fleet Management" class=md-nav__link> Fleet Management </a> </li> <li class=md-nav__item> <a href=../../demos/realtime-stream-etl/ title="RT Stream ETL" class=md-nav__link> RT Stream ETL </a> </li> <li class=md-nav__item> <a href=../../demos/realtime-data-distribution/ title="RT Data Distribution (Event Hub)" class=md-nav__link> RT Data Distribution (Event Hub) </a> </li> <li class=md-nav__item> <a href=../../demos/streamlit-oxford/ title="Oxford Economics" class=md-nav__link> Oxford Economics </a> </li> <li class=md-nav__item> <a href=../../demos/credit-card-fraud/ title="Credit Card Fraud" class=md-nav__link> Credit Card Fraud </a> </li> <li class=md-nav__item> <a href=../../demos/jamstack-gatsby/ title="Polling App (Gatsby)" class=md-nav__link> Polling App (Gatsby) </a> </li> <li class=md-nav__item> <a href=../../demos/cloudflare-workers/ title="Working with Cloudflare Workers" class=md-nav__link> Working with Cloudflare Workers </a> </li> <li class=md-nav__item> <a href=../../demos/dynamo/ title="Dynamo Mode" class=md-nav__link> Dynamo Mode </a> </li> <li class=md-nav__item> <a href=../../demos/c8ql-examples/ title="C8QL Examples" class=md-nav__link> C8QL Examples </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#dataset class=md-nav__link> Dataset </a> <nav class=md-nav aria-label=Dataset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#characters class=md-nav__link> Characters </a> </li> <li class=md-nav__item> <a href=#traits class=md-nav__link> Traits </a> </li> <li class=md-nav__item> <a href=#locations class=md-nav__link> Locations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD </a> <nav class=md-nav aria-label=CRUD> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-documents class=md-nav__link> Create documents </a> </li> <li class=md-nav__item> <a href=#read-documents class=md-nav__link> Read documents </a> </li> <li class=md-nav__item> <a href=#update-documents class=md-nav__link> Update documents </a> </li> <li class=md-nav__item> <a href=#delete-documents class=md-nav__link> Delete documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matching-documents class=md-nav__link> Matching documents </a> <nav class=md-nav aria-label="Matching documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#equality-condition class=md-nav__link> Equality condition </a> </li> <li class=md-nav__item> <a href=#range-conditions class=md-nav__link> Range conditions </a> </li> <li class=md-nav__item> <a href=#multiple-conditions class=md-nav__link> Multiple conditions </a> </li> <li class=md-nav__item> <a href=#alternative-conditions class=md-nav__link> Alternative conditions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sorting-and-limiting class=md-nav__link> Sorting and limiting </a> <nav class=md-nav aria-label="Sorting and limiting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cap-the-result-count class=md-nav__link> Cap the result count </a> </li> <li class=md-nav__item> <a href=#sort-by-name class=md-nav__link> Sort by name </a> </li> <li class=md-nav__item> <a href=#sort-by-multiple-attributes class=md-nav__link> Sort by multiple attributes </a> </li> <li class=md-nav__item> <a href=#sort-by-age class=md-nav__link> Sort by age </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#joining-together class=md-nav__link> Joining together </a> <nav class=md-nav aria-label="Joining together"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#references-to-other-documents class=md-nav__link> References to other documents </a> </li> <li class=md-nav__item> <a href=#importing-traits class=md-nav__link> Importing traits </a> </li> <li class=md-nav__item> <a href=#resolving-traits class=md-nav__link> Resolving traits </a> </li> <li class=md-nav__item> <a href=#merging-characters-and-traits class=md-nav__link> Merging characters and traits </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graph-traversal class=md-nav__link> Graph Traversal </a> <nav class=md-nav aria-label="Graph Traversal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#childof-relations class=md-nav__link> ChildOf relations </a> </li> <li class=md-nav__item> <a href=#creating-the-edges class=md-nav__link> Creating the edges </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-parents class=md-nav__link> Traverse to the parents </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-children class=md-nav__link> Traverse to the children </a> </li> <li class=md-nav__item> <a href=#traverse-to-the-grandchildren class=md-nav__link> Traverse to the grandchildren </a> </li> <li class=md-nav__item> <a href=#traverse-with-variable-depth class=md-nav__link> Traverse with variable depth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#geospatial-queries class=md-nav__link> Geospatial queries </a> <nav class=md-nav aria-label="Geospatial queries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locations-data class=md-nav__link> Locations data </a> </li> <li class=md-nav__item> <a href=#geospatial-index class=md-nav__link> Geospatial index </a> </li> <li class=md-nav__item> <a href=#find-nearby-locations class=md-nav__link> Find nearby locations </a> </li> <li class=md-nav__item> <a href=#find-locations-within-radius class=md-nav__link> Find locations within radius </a> </li> <li class=md-nav__item> <a href=#return-the-distance class=md-nav__link> Return the distance </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Macrometacorp/docs/edit/master/docs/c8ql/c8ql-tutorial.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=c8ql-tutorial>C8QL Tutorial<a class=headerlink href=#c8ql-tutorial title="Permanent link">&para;</a></h1> <p>This is an introduction to GDN's query language C8QL, built around a small dataset of characters from the novel and fantasy drama television series Game of Thrones (as of season 1). It includes character traits in two languages, some family relations, and last but not least a small set of filming locations, which makes for an interesting mix of data to work with.</p> <p>There is no need to import the data before you start. It is provided as part of the C8QL queries in this tutorial. </p> <h2 id=dataset>Dataset<a class=headerlink href=#dataset title="Permanent link">&para;</a></h2> <h3 id=characters>Characters<a class=headerlink href=#characters title="Permanent link">&para;</a></h3> <p>The dataset features 43 characters with their name, surname, age, alive status and trait references. The surname and age properties are not always present. The column <em>traits (resolved)</em> is not part of the actual data used in this tutorial, but included for your convenience.</p> <p><img alt=Characters_Table src=../images/Characters_Table.png></p> <h3 id=traits>Traits<a class=headerlink href=#traits title="Permanent link">&para;</a></h3> <p>There are 18 unique traits. Each trait has a random letter as document key. The trait labels come in English and German.</p> <p><img alt=Traits_Table src=../images/Traits_Table.png></p> <h3 id=locations>Locations<a class=headerlink href=#locations title="Permanent link">&para;</a></h3> <p>This small collection of 8 filming locations comes with two attributes, a <em>name</em> and a <em>coordinate</em>. The coordinates are modeled as number arrays, comprised of a latitude and a longitude value each.</p> <p><img alt=Locations_Table src=../images/Locations_Table.png></p> <h2 id=crud>CRUD<a class=headerlink href=#crud title="Permanent link">&para;</a></h2> <ul> <li><a href=#create-documents>Create documents</a></li> <li><a href=#read-documents>Read documents</a></li> <li><a href=#update-documents>Update documents</a></li> <li><a href=#delete-documents>Delete documents</a></li> </ul> <h3 id=create-documents>Create documents<a class=headerlink href=#create-documents title="Permanent link">&para;</a></h3> <p>Before we can insert documents with C8QL, we need a place to put them in - a collection. Collections can be managed via the web interface, c8sh or a driver. It is not possible to do so with C8QL however.</p> <p><img alt=Collection_Add src=../images/Collection_Add-GUI.png></p> <p><img alt="Create Characters_Collection" src=../images/Characters_Collection_Creation.png></p> <p>Click on <code>COLLECTIONS</code>in the web interface, then <em>Add Collection</em> and type <code>Characters</code> as name. Confirm with <em>Save</em>. The new collection should appear in the list.</p> <p>Next, click on <code>QUERIES</code>. To create the first document for collection with C8QL, use the following C8QL query, which you can paste into the query textbox and run by clicking <em>Execute</em>:</p> <p><img alt="Insert query in query editor" src=../images/Query_Insert.png></p> <div class=highlight><pre><span></span><code><span class=nx>INSERT</span> <span class=p>{</span>
    <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>41</span><span class=p>,</span>
    <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span>
<span class=p>}</span> <span class=nx>INTO</span> <span class=nx>Characters</span>
</code></pre></div> <p>The syntax is <code>INSERT document INTO collectionName</code>. The document is an object like you may know it from JavaScript or JSON, which is comprised of attribute key and value pairs. The quotes around the attribute keys are optional in C8QL. Keys are always character sequences (strings), whereas attribute values can have <a href=../../references/fundamentals#data-types>different types</a>:</p> <ul> <li>null</li> <li>boolean (true, false)</li> <li>number (integer and floating point)</li> <li>string</li> <li>array</li> <li>object</li> </ul> <p>Name and surname of the character document we inserted are both string values. The alive state uses a boolean. Age is a numeric value. The traits are an array of strings. The entire document is an object.</p> <p>Let's add a bunch of other characters in a single query:</p> <div class=highlight><pre><span></span><code><span class=nx>LET</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Robert&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jaime&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>36</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>40</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Cersei&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>36</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Daenerys&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Targaryen&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>16</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jorah&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Mormont&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Petyr&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baelish&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;G&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Viserys&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Targaryen&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;O&quot;</span><span class=p>,</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jon&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Snow&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>16</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Sansa&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>13</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;I&quot;</span><span class=p>,</span><span class=s2>&quot;J&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Arya&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>11</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;L&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Robb&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Theon&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Greyjoy&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>16</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;R&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Bran&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>10</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;J&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>19</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;I&quot;</span><span class=p>,</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;O&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Sandor&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Clegane&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>32</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Khal&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Drogo&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;O&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;O&quot;</span><span class=p>,</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Davos&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Seaworth&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>49</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Samwell&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Tarly&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>17</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;I&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Stannis&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;O&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;M&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Melisandre&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;G&quot;</span><span class=p>,</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Margaery&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Tyrell&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jeor&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Mormont&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Bronn&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Varys&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;E&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Shae&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;G&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Talisa&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Maegyr&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Gendry&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ygritte&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tormund&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Giantsbane&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;I&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Gilly&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;J&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Brienne&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Tarth&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>32</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ramsay&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Bolton&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;O&quot;</span><span class=p>,</span><span class=s2>&quot;G&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ellaria&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Sand&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;O&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;E&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Daario&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Naharis&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;K&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Missandei&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;M&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tommen&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;I&quot;</span><span class=p>,</span><span class=s2>&quot;L&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jaqen&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;H&#39;ghar&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;K&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Roose&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Bolton&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;A&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;The High Sparrow&quot;</span><span class=p>,</span> <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;M&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;O&quot;</span><span class=p>]</span> <span class=p>}</span>
<span class=p>]</span>

<span class=nx>FOR</span> <span class=nx>d</span> <span class=nx>IN</span> <span class=nx>data</span>
    <span class=nx>INSERT</span> <span class=nx>d</span> <span class=nx>INTO</span> <span class=nx>Characters</span>
</code></pre></div> <p>The <code>LET</code> keyword defines a variable with name <em>data</em> and an array of objects as value, so <code>LET variableName = valueExpression</code> and the expression being a literal array definition like <code>[ {...}, {...}, ... ]</code>.</p> <p><code>FOR variableName IN expression</code> is used to iterate over each element of the <em>data</em> array. In each loop, one element is assigned to the variable <em>d</em>. This variable is then used in the <code>INSERT</code> statement instead of a literal object definition. What is does is basically:</p> <div class=highlight><pre><span></span><code><span class=nx>INSERT</span> <span class=p>{</span>
    <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Robert&quot;</span><span class=p>,</span>
    <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span>
    <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span>
<span class=p>}</span> <span class=nx>INTO</span> <span class=nx>Characters</span>

<span class=nx>INSERT</span> <span class=p>{</span>
    <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jaime&quot;</span><span class=p>,</span>
    <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span><span class=p>,</span>
    <span class=s2>&quot;alive&quot;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&quot;age&quot;</span><span class=o>:</span> <span class=mf>36</span><span class=p>,</span>
    <span class=s2>&quot;traits&quot;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;F&quot;</span><span class=p>,</span><span class=s2>&quot;B&quot;</span><span class=p>]</span>
<span class=p>}</span> <span class=nx>INTO</span> <span class=nx>Characters</span>

<span class=p>...</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>C8QL does not permit multiple <code>INSERT</code> operations that target the same collection in a single query. It is allowed as body of a <code>FOR</code> loop however, inserting multiple documents like we did with above query.</p> </div> <h3 id=read-documents>Read documents<a class=headerlink href=#read-documents title="Permanent link">&para;</a></h3> <p>There are a couple of documents in the <em>Characters</em> collection by now. We can retrieve them all using a <code>FOR</code> loop again. This time however, we use it to go through all documents in the collection instead of an array:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>RETURN</span> <span class=nx>c</span>
</code></pre></div> <p>The syntax of the loop is <code>FOR variableName IN collectionName</code>. For each document in the collection, <em>c</em> is assigned a document, which is then returned as per the loop body. The query returns all characters we previously stored.</p> <p>Among them should be <em>Ned Stark</em>, similar to this example:</p> <div class=highlight><pre><span></span><code>  <span class=p>{</span>
    <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861650&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861650&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa---&quot;</span><span class=p>,</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
    <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span>
  <span class=p>},</span>
</code></pre></div> <p>The document features the five attributes we stored, plus three more added by the database system. Each document needs a unique <code>_key</code>, which identifies it within a collection. The <code>_id</code> is a computed property, a concatenation of the collection name, a forward slash <code>/</code> and the document key. It uniquely identies a document within a database. <code>_rev</code> is a revision ID managed by the system.</p> <p>Document keys can be provided by the user upon document creation, or a unique value is assigned automatically. It can not be changed later. All three system attributes starting with an underscore <code>_</code> are read-only.</p> <p>We can use either the document key or the document ID to retrieve a specific document with the help of a C8QL function <code>DOCUMENT()</code>:</p> <div class=highlight><pre><span></span><code><span class=nx>RETURN</span> <span class=nx>DOCUMENT</span><span class=p>(</span><span class=s2>&quot;Characters&quot;</span><span class=p>,</span> <span class=s2>&quot;2861650&quot;</span><span class=p>)</span>
<span class=c1>// --- or ---</span>
<span class=nx>RETURN</span> <span class=nx>DOCUMENT</span><span class=p>(</span><span class=s2>&quot;Characters/2861650&quot;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span>
    <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861650&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861650&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa---&quot;</span><span class=p>,</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
    <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span>
  <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> </div> <p>Document keys will be different for you. Change the queries accordingly. Here, <code>"2861650"</code> is the key for the <code>Ned Stark</code> document, and <code>"2861653"</code> for <code>Catelyn Stark</code>.</p> <p>The <code>DOCUMENT()</code> function also allows to fetch multiple documents at once:</p> <div class=highlight><pre><span></span><code><span class=nx>RETURN</span> <span class=nx>DOCUMENT</span><span class=p>(</span><span class=s2>&quot;Characters&quot;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&quot;2861650&quot;</span><span class=p>,</span> <span class=s2>&quot;2861653&quot;</span><span class=p>])</span>
<span class=c1>// --- or ---</span>
<span class=nx>RETURN</span> <span class=nx>DOCUMENT</span><span class=p>([</span><span class=s2>&quot;Characters/2861650&quot;</span><span class=p>,</span> <span class=s2>&quot;Characters/2861653&quot;</span><span class=p>])</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861650&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861650&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa---&quot;</span><span class=p>,</span>
      <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
      <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
      <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
      <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861653&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861653&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa--B&quot;</span><span class=p>,</span>
      <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span>
      <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
      <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>40</span><span class=p>,</span>
      <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span>
    <span class=p>}</span>
  <span class=p>]</span>
<span class=p>]</span>
</code></pre></div> <p>See the <a href=../../functions/miscellaneous#document><code>DOCUMENT()</code></a> documentation for more details.</p> <h3 id=update-documents>Update documents<a class=headerlink href=#update-documents title="Permanent link">&para;</a></h3> <p>According to our <code>Ned Stark</code> document, he is alive. When we get to know that he died, we need to change the <code>alive</code> attribute. Let us modify the existing document:</p> <div class=highlight><pre><span></span><code><span class=nx>UPDATE</span> <span class=s2>&quot;2861650&quot;</span> <span class=nx>WITH</span> <span class=p>{</span> <span class=nx>alive</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span> <span class=nx>IN</span> <span class=nx>Characters</span>
</code></pre></div> <p>The syntax is <code>UPDATE documentKey WITH object IN collectionName</code>. It updates the specified document with the attributes listed (or adds them if they don't exist), but leaves the rest untouched. To replace the entire document content, you may use <code>REPLACE</code> instead of <code>UPDATE</code>:</p> <div class=highlight><pre><span></span><code><span class=nx>REPLACE</span> <span class=s2>&quot;2861650&quot;</span> <span class=nx>WITH</span> <span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=nx>surname</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nx>alive</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nx>age</span><span class=o>:</span> <span class=mf>41</span><span class=p>,</span>
    <span class=nx>traits</span><span class=o>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span>
<span class=p>}</span> <span class=nx>IN</span> <span class=nx>Characters</span>
</code></pre></div> <p>This also works in a loop, to add a new attribute to all documents for instance:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>UPDATE</span> <span class=nx>c</span> <span class=nx>WITH</span> <span class=p>{</span> <span class=nx>season</span><span class=o>:</span> <span class=mf>1</span> <span class=p>}</span> <span class=nx>IN</span> <span class=nx>Characters</span>
</code></pre></div> <p>A variable is used instead of a literal document key, to update each document. The query adds an attribute <code>season</code> to the documents' top-level. You can inspect the result by re-running the query that returns all documents in collection:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>RETURN</span> <span class=nx>c</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861650&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861650&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa---&quot;</span><span class=p>,</span>
      <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
      <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
      <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
      <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>],</span>
      <span class=nt>&quot;season&quot;</span><span class=p>:</span> <span class=mi>1</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861653&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861653&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa--B&quot;</span><span class=p>,</span>
      <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span>
      <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
      <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>40</span><span class=p>,</span>
      <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>],</span>
      <span class=nt>&quot;season&quot;</span><span class=p>:</span> <span class=mi>1</span>
    <span class=p>},</span>
    <span class=p>{</span>
        <span class=err>...</span>
    <span class=p>}</span>
  <span class=p>]</span>
<span class=p>]</span>
</code></pre></div> <h3 id=delete-documents>Delete documents<a class=headerlink href=#delete-documents title="Permanent link">&para;</a></h3> <p>To fully remove documents from a collection, there is the <code>REMOVE</code> operation. It works similar to the other modification operations, yet without a <code>WITH</code> clause:</p> <div class=highlight><pre><span></span><code><span class=nx>REMOVE</span> <span class=s2>&quot;2861650&quot;</span> <span class=nx>IN</span> <span class=nx>Characters</span>
</code></pre></div> <p>It can also be used in a loop body to effectively truncate a collection:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>REMOVE</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Re-run the <a href=#create-documents>insert queries</a> at the top with all character documents before you continue with the next chapter, to have data to work with again.</p> </div> <h2 id=matching-documents>Matching documents<a class=headerlink href=#matching-documents title="Permanent link">&para;</a></h2> <p>So far, we either looked up a single document, or returned the entire character collection. For the lookup, we used the <code>DOCUMENT()</code> function, which means we can only find documents by their key or ID.</p> <p>To find documents that fulfill certain criteria more complex than key equality, there is the <code>FILTER</code> operation in C8QL, which enables us to formulate arbitrary conditions for documents to match.</p> <h3 id=equality-condition>Equality condition<a class=headerlink href=#equality-condition title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Ned&quot;</span>
    <span class=nx>RETURN</span> <span class=nx>c</span>
</code></pre></div> <p>The filter condition reads like: "the attribute <em>name</em> of a character document must be equal to the string <em>Ned</em>". If the condition applies, character document gets returned. This works with any attribute likewise:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span> <span class=o>==</span> <span class=s2>&quot;Stark&quot;</span>
    <span class=nx>RETURN</span> <span class=nx>c</span>
</code></pre></div> <h3 id=range-conditions>Range conditions<a class=headerlink href=#range-conditions title="Permanent link">&para;</a></h3> <p>Strict equality is one possible condition we can state. There are plenty of other conditions we can formulate however. For example, we could ask for all young characters:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=o>&gt;=</span> <span class=mf>13</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Samwell&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Cersei&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Jon&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Sansa&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Brienne&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Theon&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Davos&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Jaime&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Daenerys&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>The operator <code>&gt;=</code> stands for <em>greater-or-equal</em>, so every character of age 13 or older is returned (only their name in the example). We can return names and age of all characters younger than 13 by changing the operator to <em>less-than</em> and using the object syntax to define a subset of attributes to return:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=o>&lt;</span> <span class=mf>13</span>
    <span class=nx>RETURN</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Tommen&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=kc>null</span> <span class=p>},</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Arya&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>11</span> <span class=p>},</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Roose&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=kc>null</span> <span class=p>},</span>
  <span class=err>...</span>
<span class=p>]</span>
</code></pre></div> <p>You may notice that it returns name and age of 30 characters, most with an age of <code>null</code>. The reason for this is, that <code>null</code> is the fallback value if an attribute is requested by the query, but no such attribute exists in the document, and the <code>null</code> is compares to numbers as lower (see <a href=../../fundamentals#type-value-order>Type and value order</a>). Hence, it accidentally fulfills the age criterion <code>c.age &lt; 13</code> (<code>null &lt; 13</code>).</p> <h3 id=multiple-conditions>Multiple conditions<a class=headerlink href=#multiple-conditions title="Permanent link">&para;</a></h3> <p>To not let documents pass the filter without an age attribute, we can add a second criterion:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=o>&lt;</span> <span class=mf>13</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=o>!=</span> <span class=kc>null</span>
    <span class=nx>RETURN</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Arya&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>11</span> <span class=p>},</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Bran&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>10</span> <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <p>This could equally be written with a boolean <code>AND</code> operator as:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=o>&lt;</span> <span class=mf>13</span> <span class=nx>AND</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=o>!=</span> <span class=kc>null</span>
    <span class=nx>RETURN</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span> <span class=p>}</span>
</code></pre></div> <p>And the second condition could as well be <code>c.age &gt; null</code>.</p> <h3 id=alternative-conditions>Alternative conditions<a class=headerlink href=#alternative-conditions title="Permanent link">&para;</a></h3> <p>If you want documents to fulfill one or another condition, possibly for different attributes as well, use <code>OR</code>:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Jon&quot;</span> <span class=nx>OR</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Joffrey&quot;</span>
    <span class=nx>RETURN</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>surname</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span> <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Baratheon&quot;</span> <span class=p>},</span>
  <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Jon&quot;</span><span class=p>,</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Snow&quot;</span> <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <p>See more details about <a href=../operations/filter/ >Filter operations</a>.</p> <h2 id=sorting-and-limiting>Sorting and limiting<a class=headerlink href=#sorting-and-limiting title="Permanent link">&para;</a></h2> <h3 id=cap-the-result-count>Cap the result count<a class=headerlink href=#cap-the-result-count title="Permanent link">&para;</a></h3> <p>It may not always be necessary to return all documents, that a <code>FOR</code> loop would normally return. In those cases, we can limit the amount of documents with a <code>LIMIT()</code> operation:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>LIMIT</span> <span class=mf>5</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tommen&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Roose&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tywin&quot;</span>
<span class=p>]</span>
</code></pre></div> <p><code>LIMIT</code> is followed by a number for the maximum document count. There is a second syntax however, which allows you to skip a certain amount of record and return the next <em>n</em> documents:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>LIMIT</span> <span class=mf>2</span><span class=p>,</span> <span class=mf>5</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Roose&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Samwell&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Melisandre&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>See how the second query skipped the first two names and returned the next five (both results feature Tyrion, Roose and Tywin).</p> <h3 id=sort-by-name>Sort by name<a class=headerlink href=#sort-by-name title="Permanent link">&para;</a></h3> <p>The order in which matching records were returned by the queries shown until here was basically random. To return them in a defined order, we can add a <code>SORT()</code> operation. It can have a big impact on the result if combined with a <code>LIMIT()</code>, because the result becomes predictable if you sort first.</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>SORT</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
    <span class=nx>LIMIT</span> <span class=mf>10</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Arya&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Bran&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Brienne&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Bronn&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Cersei&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Daario&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Daenerys&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Davos&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Ellaria&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>See how it sorted by name, then returned the ten alphabetically first coming names. We can reverse the sort order with <code>DESC</code> like descending:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>SORT</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=nx>DESC</span>
    <span class=nx>LIMIT</span> <span class=mf>10</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Ygritte&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Viserys&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Varys&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tormund&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tommen&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Theon&quot;</span><span class=p>,</span>
  <span class=s2>&quot;The High Sparrow&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Talisa&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>The first sort was ascending, which is the default order. Because it is the default, it is not required to explicitly ask for <code>ASC</code> order.</p> <h3 id=sort-by-multiple-attributes>Sort by multiple attributes<a class=headerlink href=#sort-by-multiple-attributes title="Permanent link">&para;</a></h3> <p>Assume we want to sort by surname. Many of the characters share a surname. The result order among characters with the same surname is undefined. We can first sort by surname, then name to determine the order:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span>
    <span class=nx>SORT</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
    <span class=nx>LIMIT</span> <span class=mf>10</span>
    <span class=nx>RETURN</span> <span class=p>{</span>
        <span class=nx>surname</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span><span class=p>,</span>
        <span class=nx>name</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span>
    <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Baelish&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Petyr&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Joffrey&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Robert&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Stannis&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Baratheon&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Tommen&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Bolton&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ramsay&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Bolton&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Roose&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Clegane&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Sandor&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Drogo&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Khal&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Giantsbane&quot;</span><span class=p>,</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Tormund&quot;</span> <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <p>Overall, the documents are sorted by last name. If the <em>surname</em> is the same for two characters, the <em>name</em> values are compared and the result sorted.</p> <p>Note that a filter is applied before sorting, to only let documents through, that actually feature a surname value (many don't have it and would cause <code>null</code> values in the result).</p> <h3 id=sort-by-age>Sort by age<a class=headerlink href=#sort-by-age title="Permanent link">&para;</a></h3> <p>The order can also be determined by a numeric value, such as the age:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span>
    <span class=nx>SORT</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span>
    <span class=nx>LIMIT</span> <span class=mf>10</span>
    <span class=nx>RETURN</span> <span class=p>{</span>
        <span class=nx>name</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
        <span class=nx>age</span><span class=o>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>age</span>
    <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Bran&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>10</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Arya&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>11</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Sansa&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>13</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Jon&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>16</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Theon&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>16</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Daenerys&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>16</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Samwell&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>17</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>19</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>32</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Brienne&quot;</span><span class=p>,</span> <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>32</span> <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <p>A filter is applied to avoid documents without age attribute. The remaining documents are sorted by age in ascending order, and the name and age of the ten youngest characters are returned.</p> <p>See the <a href=../operations/sort/ >SORT operation</a> and <a href=../operations/limit/ >LIMIT operation</a> documentation for more details.</p> <h2 id=joining-together>Joining together<a class=headerlink href=#joining-together title="Permanent link">&para;</a></h2> <h3 id=references-to-other-documents>References to other documents<a class=headerlink href=#references-to-other-documents title="Permanent link">&para;</a></h3> <p>The character data we imported has an attribute <em>traits</em> for each character, which is an array of strings. It does not store character features directly however:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
    <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <p>It is rather a list of letters without an apparent meaning. The idea here is that <em>traits</em> is supposed to store documents keys of another collection, which we can use to resolve the letters to labels such as "strong". The benefit of using another collection for the actual traits is, that we can easily query for all existing traits later on and store labels in multiple languages for instance in a central place. If we would embed traits directly...</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
    <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
            <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;stark&quot;</span><span class=p>,</span>
            <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;strong&quot;</span>
        <span class=p>},</span>
        <span class=p>{</span>
            <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;einflussreich&quot;</span><span class=p>,</span>
            <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;powerful&quot;</span>
        <span class=p>},</span>
        <span class=p>{</span>
            <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span><span class=p>,</span>
            <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span>
        <span class=p>},</span>
        <span class=p>{</span>
            <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;rational&quot;</span><span class=p>,</span>
            <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;rational&quot;</span>
        <span class=p>},</span>
        <span class=p>{</span>
            <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;mutig&quot;</span><span class=p>,</span>
            <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;brave&quot;</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <p>... it becomes really hard to maintain traits. If you were to rename or translate one of them, you would need to find all other character documents with the same trait and perform the changes there too. If we only refer to a trait in another collection, it is as easy as updating a single document.</p> <p><img alt=Comparison_DataModels src=../images/Comparison_DataModels.png></p> <h3 id=importing-traits>Importing traits<a class=headerlink href=#importing-traits title="Permanent link">&para;</a></h3> <p>Below you find the traits data. Follow the pattern shown in <a href=CRUD.md#create-documents>Create documents</a> to import it:</p> <ul> <li>Create a document collection <em>Traits</em></li> <li>Assign the data to a variable in C8QL, <code>LET data = [ ... ]</code></li> <li>Use a <code>FOR</code> loop to iterate over each array element of the data</li> <li><code>INSERT</code> the element <code>INTO Traits</code></li> </ul> <p><img alt="Create Traits_Collection" src=../images/Traits_Collection_Creation.png></p> <div class=highlight><pre><span></span><code><span class=p>[</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;strong&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;stark&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;B&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;polite&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;freundlich&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;C&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;D&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;beautiful&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;schön&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;E&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;sneaky&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;hinterlistig&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;F&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;experienced&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;erfahren&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;G&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;corrupt&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;korrupt&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;H&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;powerful&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;einflussreich&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;I&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;naive&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;naiv&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;J&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;unmarried&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;unverheiratet&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;K&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;skillful&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;geschickt&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;L&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;young&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;jung&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;M&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;smart&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;klug&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;N&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;rational&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;rational&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;O&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;ruthless&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;skrupellos&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;P&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;brave&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;mutig&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;Q&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;mighty&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;mächtig&quot;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;R&quot;</span><span class=p>,</span> <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;weak&quot;</span><span class=p>,</span> <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;schwach&quot;</span> <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <h3 id=resolving-traits>Resolving traits<a class=headerlink href=#resolving-traits title="Permanent link">&para;</a></h3> <p>Let's start simple by returning only the traits attribute of each character:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>traits</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
    <span class=p>{</span> <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=s2>&quot;N&quot;</span><span class=p>,</span><span class=s2>&quot;P&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=s2>&quot;H&quot;</span><span class=p>,</span><span class=s2>&quot;C&quot;</span><span class=p>]</span> <span class=p>},</span>
    <span class=err>...</span>
<span class=p>]</span>
</code></pre></div> <p>Also see the <a href=../../fundamentals#objects-documents>Fundamentals of Objects / Documents</a> about attribute access.</p> <p>We can use the <em>traits</em> array together with the <code>DOCUMENT()</code> function to use the elements as document keys and look up them up in the <em>Traits</em> collection:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>RETURN</span> <span class=nx>DOCUMENT</span><span class=p>(</span><span class=s2>&quot;Traits&quot;</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>traits</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/A&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUS2---&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;strong&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;stark&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;H&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/H&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUS6--E&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;powerful&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;einflussreich&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;C&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/C&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUS6--_&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;N&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/N&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUT---D&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;rational&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;rational&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;P&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/P&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUTC---&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;brave&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;mutig&quot;</span>
    <span class=p>}</span>
  <span class=p>],</span>
  <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;D&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/D&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUS6--A&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;beautiful&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;schön&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;H&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/H&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUS6--E&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;powerful&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;einflussreich&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;C&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Traits/C&quot;</span><span class=p>,</span>
      <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V5oRUS6--_&quot;</span><span class=p>,</span>
      <span class=nt>&quot;en&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span><span class=p>,</span>
      <span class=nt>&quot;de&quot;</span><span class=p>:</span> <span class=s2>&quot;loyal&quot;</span>
    <span class=p>}</span>
  <span class=p>],</span>
  <span class=err>...</span>
<span class=p>]</span>
</code></pre></div> <p>This is a bit too much information, so let's only return English labels using the <a href=../ArrayOperators.md#array-expansion>array expansion</a> notation:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>RETURN</span> <span class=nx>DOCUMENT</span><span class=p>(</span><span class=s2>&quot;Traits&quot;</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>traits</span><span class=p>)[</span><span class=o>*</span><span class=p>].</span><span class=nx>en</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>[</span>
    <span class=s2>&quot;strong&quot;</span><span class=p>,</span>
    <span class=s2>&quot;powerful&quot;</span><span class=p>,</span>
    <span class=s2>&quot;loyal&quot;</span><span class=p>,</span>
    <span class=s2>&quot;rational&quot;</span><span class=p>,</span>
    <span class=s2>&quot;brave&quot;</span>
  <span class=p>],</span>
  <span class=p>[</span>
    <span class=s2>&quot;beautiful&quot;</span><span class=p>,</span>
    <span class=s2>&quot;powerful&quot;</span><span class=p>,</span>
    <span class=s2>&quot;loyal&quot;</span>
  <span class=p>],</span>
  <span class=err>...</span>
<span class=p>]</span>
</code></pre></div> <h3 id=merging-characters-and-traits>Merging characters and traits<a class=headerlink href=#merging-characters-and-traits title="Permanent link">&para;</a></h3> <p>Great, we resolved the letters to meaningful traits! But we also need to know to which character they belong. Thus, we need to merge both the character document and the data from trait document:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>RETURN</span> <span class=nx>MERGE</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span> <span class=p>{</span> <span class=nx>traits</span><span class=o>:</span> <span class=nx>DOCUMENT</span><span class=p>(</span><span class=s2>&quot;Traits&quot;</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>traits</span><span class=p>)[</span><span class=o>*</span><span class=p>].</span><span class=nx>en</span> <span class=p>}</span> <span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span>
    <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861650&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861650&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa---&quot;</span><span class=p>,</span>
    <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>41</span><span class=p>,</span>
    <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
    <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span>
      <span class=s2>&quot;strong&quot;</span><span class=p>,</span>
      <span class=s2>&quot;powerful&quot;</span><span class=p>,</span>
      <span class=s2>&quot;loyal&quot;</span><span class=p>,</span>
      <span class=s2>&quot;rational&quot;</span><span class=p>,</span>
      <span class=s2>&quot;brave&quot;</span>
    <span class=p>]</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nt>&quot;_id&quot;</span><span class=p>:</span> <span class=s2>&quot;Characters/2861653&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_key&quot;</span><span class=p>:</span> <span class=s2>&quot;2861653&quot;</span><span class=p>,</span>
    <span class=nt>&quot;_rev&quot;</span><span class=p>:</span> <span class=s2>&quot;_V1bzsXa--B&quot;</span><span class=p>,</span>
    <span class=nt>&quot;age&quot;</span><span class=p>:</span> <span class=mi>40</span><span class=p>,</span>
    <span class=nt>&quot;alive&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span>
    <span class=nt>&quot;surname&quot;</span><span class=p>:</span> <span class=s2>&quot;Stark&quot;</span><span class=p>,</span>
    <span class=nt>&quot;traits&quot;</span><span class=p>:</span> <span class=p>[</span>
      <span class=s2>&quot;beautiful&quot;</span><span class=p>,</span>
      <span class=s2>&quot;powerful&quot;</span><span class=p>,</span>
      <span class=s2>&quot;loyal&quot;</span>
    <span class=p>]</span>
  <span class=p>},</span>
  <span class=err>...</span>
<span class=p>]</span>
</code></pre></div> <p>The <code>MERGE()</code> functions merges objects together. Because we used an object <code>{ traits: ... }</code> which has the same attribute name <em>traits</em> as the original character attribute, the latter is overwritten by the merge.</p> <h2 id=graph-traversal>Graph Traversal<a class=headerlink href=#graph-traversal title="Permanent link">&para;</a></h2> <p>Relations such as between parents and children can be modeled as graph. In C8, two documents (a parent and a child character document) can be linked by an edge document. Edge documents are stored in edge collections and have two additional attributes: <code>_from</code> and <code>_to</code>. They reference any two documents by their document IDs (<code>_id</code>).</p> <h3 id=childof-relations>ChildOf relations<a class=headerlink href=#childof-relations title="Permanent link">&para;</a></h3> <p>Our characters have the following relations between parents and children (first names only for a better overview):</p> <div class=highlight><pre><span></span><code>    Robb -&gt; Ned
   Sansa -&gt; Ned
    Arya -&gt; Ned
    Bran -&gt; Ned
     Jon -&gt; Ned
    Robb -&gt; Catelyn
   Sansa -&gt; Catelyn
    Arya -&gt; Catelyn
    Bran -&gt; Catelyn
   Jaime -&gt; Tywin
  Cersei -&gt; Tywin
  Tyrion -&gt; Tywin
 Joffrey -&gt; Jaime
 Joffrey -&gt; Cersei
</code></pre></div> <p>Visualized as graph:</p> <p><img alt="ChildOf graph visualization" src=../images/ChildOf_Graph.png></p> <h3 id=creating-the-edges>Creating the edges<a class=headerlink href=#creating-the-edges title="Permanent link">&para;</a></h3> <p>To create the required edge documents to store these relations in the database, we can run a query that combines joining and filtering to match up the right character documents, then use their <code>_id</code> attribute to insert an edge into an edge collection <em>ChildOf</em>.</p> <p>First off, create a new collection with the name <em>ChildOf</em> and make sure you change the collection type to <strong>Edge</strong>.</p> <p><img alt=ChildOf_Collection_Creation src=../images/ChildOf_Collection_Creation.png></p> <p>Then run the following query:</p> <div class=highlight><pre><span></span><code><span class=nx>LET</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Robb&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Sansa&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Arya&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Bran&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Robb&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Sansa&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Arya&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Catelyn&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Bran&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Ned&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Stark&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jon&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Snow&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jaime&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Cersei&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Tyrion&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Cersei&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span> <span class=p>}</span>
    <span class=p>},</span> <span class=p>{</span>
        <span class=s2>&quot;parent&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Jaime&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Lannister&quot;</span> <span class=p>},</span>
        <span class=s2>&quot;child&quot;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span> <span class=s2>&quot;surname&quot;</span><span class=o>:</span> <span class=s2>&quot;Baratheon&quot;</span> <span class=p>}</span>
    <span class=p>}</span>
<span class=p>]</span>

<span class=nx>FOR</span> <span class=nx>rel</span> <span class=ow>in</span> <span class=nx>data</span>
    <span class=nx>LET</span> <span class=nx>parentId</span> <span class=o>=</span> <span class=nx>FIRST</span><span class=p>(</span>
        <span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
            <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=nx>rel</span><span class=p>.</span><span class=nx>parent</span><span class=p>.</span><span class=nx>name</span>
            <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span> <span class=o>==</span> <span class=nx>rel</span><span class=p>.</span><span class=nx>parent</span><span class=p>.</span><span class=nx>surname</span>
            <span class=nx>LIMIT</span> <span class=mf>1</span>
            <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>_id</span>
    <span class=p>)</span>
    <span class=nx>LET</span> <span class=nx>childId</span> <span class=o>=</span> <span class=nx>FIRST</span><span class=p>(</span>
        <span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
            <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=nx>rel</span><span class=p>.</span><span class=nx>child</span><span class=p>.</span><span class=nx>name</span>
            <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>surname</span> <span class=o>==</span> <span class=nx>rel</span><span class=p>.</span><span class=nx>child</span><span class=p>.</span><span class=nx>surname</span>
            <span class=nx>LIMIT</span> <span class=mf>1</span>
            <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>_id</span>
    <span class=p>)</span>
    <span class=nx>FILTER</span> <span class=nx>parentId</span> <span class=o>!=</span> <span class=kc>null</span> <span class=nx>AND</span> <span class=nx>childId</span> <span class=o>!=</span> <span class=kc>null</span>
    <span class=nx>INSERT</span> <span class=p>{</span> <span class=nx>_from</span><span class=o>:</span> <span class=nx>childId</span><span class=p>,</span> <span class=nx>_to</span><span class=o>:</span> <span class=nx>parentId</span> <span class=p>}</span> <span class=nx>INTO</span> <span class=nx>ChildOf</span>
    <span class=nx>RETURN</span> <span class=nx>NEW</span>
</code></pre></div> <p>The character documents don't have user-defined keys. If they had, it would allow us to create the edges more easily like:</p> <div class=highlight><pre><span></span><code><span class=nx>INSERT</span> <span class=p>{</span> <span class=nx>_from</span><span class=o>:</span> <span class=s2>&quot;Characters/robb&quot;</span><span class=p>,</span> <span class=nx>_to</span><span class=o>:</span> <span class=s2>&quot;Characters/ned&quot;</span> <span class=p>}</span> <span class=nx>INTO</span> <span class=nx>ChildOf</span>
</code></pre></div> <p>However, creating the edges programmatically based on character names is a good excercise. Breakdown of the query:</p> <ul> <li>Assign the relations in form of an array of objects with a <em>parent</em> and a <em>child</em> attribute each, both with sub-attributes <em>name</em> and <em>surname</em>, to a variable <code>data</code></li> <li>For each element in this array, assign a relation to a variable <code>rel</code> and execute the subsequent instructions</li> <li>Assign the result of an expression to a variable <code>parentId</code></li> <li>Take the first element of a sub-query result (sub-queries are enclosed by parentheses, but here they are also a function call)<ul> <li>For each document in the Characters collection, assign the document to a variable <code>c</code></li> <li>Apply two filter conditions: the name in the character document must equal the parent name in <code>rel</code>, and the surname must also equal the surname give in the relations data</li> <li>Stop after the first match for efficiency</li> <li>Return the ID of the character document (the result of the sub-query is an array with one element, <code>FIRST()</code> takes this element and assigns it to the <code>parentId</code> variable)</li> </ul> </li> <li>Assign the result of an expression to a variable <code>childId</code></li> <li>A sub-query is used to find the child character document and the ID is returned, in the same way as the parent document ID (see above)</li> <li>If either or both of the sub-queries were unable to find a match, skip the current relation, because two IDs for both ends of an edge are required to create one (this is only a precaution)</li> <li>Insert a new edge document into the ChildOf collection, with the edge going from <code>childId</code> to <code>parentId</code> and no other attributes</li> <li>Return the new edge document (optional)</li> </ul> <h3 id=traverse-to-the-parents>Traverse to the parents<a class=headerlink href=#traverse-to-the-parents title="Permanent link">&para;</a></h3> <p>Now that edges link character documents (vertices), we have a graph we can query to find out who the parents are of another character &ndash; or in graph terms, we want to start at a vertex and follow the edges to other vertices in . A <a href=../graphs/traversals/ >C8QL graph traversal</a>:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>v</span> <span class=nx>IN</span> <span class=mf>1..1</span> <span class=nx>OUTBOUND</span> <span class=s2>&quot;Characters/2901776&quot;</span> <span class=nx>ChildOf</span>
    <span class=nx>RETURN</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <p>This <code>FOR</code> loop doesn't iterate over a collection or an array, it walks the graph and iterates over the connected vertices it finds, with the vertex document assigned to a variable (here: <code>v</code>). It can also emit the edges it walked as well as the full path from start to end to <a href=../graphs/traversals/#syntax>another two variables</a>.</p> <p>In above query, the traversal is restricted to a minimum and maximum traversal depth of 1 (how many steps to take from the start vertex), and to only follow edges in <code>OUTBOUND</code> direction. Our edges point from child to parent, and the parent is one step away from the child, thus it gives us the parents of the child we start at. <code>"Characters/2901776"</code> is that start vertex. Note that the document ID will be different for you, so please adjust it to your document ID of e.g. the Bran Stark document:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Bran&quot;</span>
    <span class=nx>RETURN</span> <span class=nx>c</span><span class=p>.</span><span class=nx>_id</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span> <span class=s2>&quot;Characters/&lt;YourDocumentkey&gt;&quot;</span> <span class=p>]</span>
</code></pre></div> <p>You may also combine this query with the traversal directly, to easily change the start vertex by adjusting the filter condition(s):</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Bran&quot;</span>
    <span class=nx>FOR</span> <span class=nx>v</span> <span class=nx>IN</span> <span class=mf>1..1</span> <span class=nx>OUTBOUND</span> <span class=nx>c</span> <span class=nx>ChildOf</span>
        <span class=nx>RETURN</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <p>The start vertex is followed by <code>ChildOf</code>, which is our edge collection. The example query returns only the name of each parent to keep the result short:</p> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Ned&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Catelyn&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>The same result will be returned for Robb, Arya and Sansa as starting point. For Jon Snow, it will only be Ned.</p> <h3 id=traverse-to-the-children>Traverse to the children<a class=headerlink href=#traverse-to-the-children title="Permanent link">&para;</a></h3> <p>We can also walk from a parent in reverse edge direction (<code>INBOUND</code> that is) to the children:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Ned&quot;</span>
    <span class=nx>FOR</span> <span class=nx>v</span> <span class=nx>IN</span> <span class=mf>1..1</span> <span class=nx>INBOUND</span> <span class=nx>c</span> <span class=nx>ChildOf</span>
        <span class=nx>RETURN</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Robb&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Sansa&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Jon&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Arya&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Bran&quot;</span>
<span class=p>]</span>
</code></pre></div> <h3 id=traverse-to-the-grandchildren>Traverse to the grandchildren<a class=headerlink href=#traverse-to-the-grandchildren title="Permanent link">&para;</a></h3> <p>For the Lannister family, we have relations that span from parent to grandchild. Let's change the traversal depth to return grandchildren, which means to go exactly two steps:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Tywin&quot;</span>
    <span class=nx>FOR</span> <span class=nx>v</span> <span class=nx>IN</span> <span class=mf>2..2</span> <span class=nx>INBOUND</span> <span class=nx>c</span> <span class=nx>ChildOf</span>
        <span class=nx>RETURN</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Joffrey&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Joffrey&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>It might be a bit unexpected, that Joffrey is returned twice. However, if you look at the graph visualization, you can see that multiple paths lead from Joffrey (bottom right) to Tywin:</p> <p><img alt=ChildOf_Graph src=../images/ChildOf_Graph.png></p> <div class=highlight><pre><span></span><code>Tywin &lt;- Jaime &lt;- Joffrey
Tywin &lt;- Cersei &lt;- Joffrey
</code></pre></div> <p>As a quick fix, change the last line of the query to <code>RETURN DISTINCT v.name</code> to return each value only once. Keep in mind though, that there are <a href=../graphs/traversals/#syntax>traversal options</a> to suppress duplicate vertices early on.</p> <h3 id=traverse-with-variable-depth>Traverse with variable depth<a class=headerlink href=#traverse-with-variable-depth title="Permanent link">&para;</a></h3> <p>To return the parents and grandparents of Joffrey, we can walk edges in <code>OUTBOUND</code> direction and adjust the traversal depth to go at least 1 step, and 2 at most:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>c</span> <span class=nx>IN</span> <span class=nx>Characters</span>
    <span class=nx>FILTER</span> <span class=nx>c</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=s2>&quot;Joffrey&quot;</span>
    <span class=nx>FOR</span> <span class=nx>v</span> <span class=nx>IN</span> <span class=mf>1..2</span> <span class=nx>OUTBOUND</span> <span class=nx>c</span> <span class=nx>ChildOf</span>
        <span class=nx>RETURN</span> <span class=nx>DISTINCT</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=s2>&quot;Cersei&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Tywin&quot;</span><span class=p>,</span>
  <span class=s2>&quot;Jaime&quot;</span>
<span class=p>]</span>
</code></pre></div> <p>If we had deeper family trees, it would only be a matter of changing the depth values to query for great-grandchildren and similar relations.</p> <h2 id=geospatial-queries>Geospatial queries<a class=headerlink href=#geospatial-queries title="Permanent link">&para;</a></h2> <p>Geospatial coordinates consisting of a latitude and longitude value can be stored either as two separate attributes, or as a single attribute in the form of an array with both numeric values. C8 can <a href=../../Manual/Indexing/Geo.html>index such coordinates</a> for fast geospatial queries.</p> <h3 id=locations-data>Locations data<a class=headerlink href=#locations-data title="Permanent link">&para;</a></h3> <p>Let us insert some filming locations into a new collection <em>Locations</em>, which you need to create first, then run below C8QL query:</p> <p><img alt=Locations_Collection_Creation src=../images/Locations_Collection_Creation.png></p> <div class=highlight><pre><span></span><code><span class=nx>LET</span> <span class=nx>places</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Dragonstone&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>55.167801</span><span class=p>,</span> <span class=o>-</span><span class=mf>6.815096</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;King&#39;s Landing&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>42.639752</span><span class=p>,</span> <span class=mf>18.110189</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;The Red Keep&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>35.896447</span><span class=p>,</span> <span class=mf>14.446442</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Yunkai&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>31.046642</span><span class=p>,</span> <span class=o>-</span><span class=mf>7.129532</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Astapor&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>31.50974</span><span class=p>,</span> <span class=o>-</span><span class=mf>9.774249</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Winterfell&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>54.368321</span><span class=p>,</span> <span class=o>-</span><span class=mf>5.581312</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Vaes Dothrak&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>54.16776</span><span class=p>,</span> <span class=o>-</span><span class=mf>6.096125</span> <span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&quot;name&quot;</span><span class=o>:</span> <span class=s2>&quot;Beyond the wall&quot;</span><span class=p>,</span> <span class=s2>&quot;coordinate&quot;</span><span class=o>:</span> <span class=p>[</span> <span class=mf>64.265473</span><span class=p>,</span> <span class=o>-</span><span class=mf>21.094093</span> <span class=p>]</span> <span class=p>}</span>
<span class=p>]</span>

<span class=nx>FOR</span> <span class=nx>place</span> <span class=nx>IN</span> <span class=nx>places</span>
    <span class=nx>INSERT</span> <span class=nx>place</span> <span class=nx>INTO</span> <span class=nx>Locations</span>
</code></pre></div> <p>Visualization of the coordinates on a map with their labels:</p> <p><img alt=Locations_Map src=../images/Locations_Map.png></p> <h3 id=geospatial-index>Geospatial index<a class=headerlink href=#geospatial-index title="Permanent link">&para;</a></h3> <p>To query based on coordinates, a <a href=../../Manual/Indexing/Geo.html>geo index</a> is required. It determines which fields contain the latitude and longitude values.</p> <ul> <li>Go to <em>COLLECTIONS</em></li> <li>Click on the <em>Locations</em> collection</li> <li>Switch to the <em>Indexes</em> tab at top</li> <li>Click the green button with a plus on the right-hand side</li> <li>Change the type to <em>Geo Index</em></li> <li>Enter <code>coordinate</code> into the <em>Fields</em> field</li> <li>Click <em>Create</em> to confirm</li> </ul> <p><img alt="Create geospatial index on coordinate attribute" src=../images/Locations_GeoIndex_Creation.png></p> <p><img alt="Indexes of Locations collection" src=../images/Locations_Indexes.png></p> <h3 id=find-nearby-locations>Find nearby locations<a class=headerlink href=#find-nearby-locations title="Permanent link">&para;</a></h3> <p>A <code>FOR</code> loop is used again, but this time to iterate over the results of a function call to <code>NEAR()</code> to find the <em>n</em> closest coordinates to a reference point, and return the documents with the nearby locations. The default for <em>n</em> is 100, which means 100 documents are returned at most, the closest matches first.</p> <p>In below example, the limit is set to 3. The origin (the reference point) is a coordinate somewhere downtown in Dublin, Ireland:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>loc</span> <span class=nx>IN</span> <span class=nx>NEAR</span><span class=p>(</span><span class=nx>Locations</span><span class=p>,</span> <span class=mf>53.35</span><span class=p>,</span> <span class=o>-</span><span class=mf>6.26</span><span class=p>,</span> <span class=mf>3</span><span class=p>)</span>
    <span class=nx>RETURN</span> <span class=p>{</span>
        <span class=nx>name</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
        <span class=nx>latitude</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>coordinate</span><span class=p>[</span><span class=mf>0</span><span class=p>],</span>
        <span class=nx>longitude</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>coordinate</span><span class=p>[</span><span class=mf>1</span><span class=p>]</span>
    <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Vaes Dothrak&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>54.16776</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-6.096125</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Winterfell&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>54.368321</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-5.581312</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Dragonstone&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>55.167801</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-6.815096</span>
  <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <p>The query returns the location name, as well as the coordinate. The coordinate is returned as two separate attributes. You may use a simpler <code>RETURN loc</code> instead if you want.</p> <h3 id=find-locations-within-radius>Find locations within radius<a class=headerlink href=#find-locations-within-radius title="Permanent link">&para;</a></h3> <p><code>NEAR()</code> can be swapped out with <code>WITHIN()</code>, to search for locations within a given radius from a reference point. The syntax is the same as for <code>NEAR()</code>, except for the fourth parameter, which specifies the radius instead of a limit. The unit for the radius is meters. The example uses a radius of 200,000 meters (200 kilometers):</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>loc</span> <span class=nx>IN</span> <span class=nx>WITHIN</span><span class=p>(</span><span class=nx>Locations</span><span class=p>,</span> <span class=mf>53.35</span><span class=p>,</span> <span class=o>-</span><span class=mf>6.26</span><span class=p>,</span> <span class=mf>200</span> <span class=o>*</span> <span class=mf>1000</span><span class=p>)</span>
    <span class=nx>RETURN</span> <span class=p>{</span>
        <span class=nx>name</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
        <span class=nx>latitude</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>coordinate</span><span class=p>[</span><span class=mf>0</span><span class=p>],</span>
        <span class=nx>longitude</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>coordinate</span><span class=p>[</span><span class=mf>1</span><span class=p>]</span>
    <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Vaes Dothrak&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>54.16776</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-6.096125</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Winterfell&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>54.368321</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-5.581312</span>
  <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <h3 id=return-the-distance>Return the distance<a class=headerlink href=#return-the-distance title="Permanent link">&para;</a></h3> <p>Both <code>NEAR()</code> and <code>WITHIN()</code> can return the distance to the reference point by adding an optional fifth parameter. It has to be a string, which will be used as attribute name for an additional attribute with the distance in meters:</p> <div class=highlight><pre><span></span><code><span class=nx>FOR</span> <span class=nx>loc</span> <span class=nx>IN</span> <span class=nx>NEAR</span><span class=p>(</span><span class=nx>Locations</span><span class=p>,</span> <span class=mf>53.35</span><span class=p>,</span> <span class=o>-</span><span class=mf>6.26</span><span class=p>,</span> <span class=mf>3</span><span class=p>,</span> <span class=s2>&quot;distance&quot;</span><span class=p>)</span>
    <span class=nx>RETURN</span> <span class=p>{</span>
        <span class=nx>name</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
        <span class=nx>latitude</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>coordinate</span><span class=p>[</span><span class=mf>0</span><span class=p>],</span>
        <span class=nx>longitude</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>coordinate</span><span class=p>[</span><span class=mf>1</span><span class=p>],</span>
        <span class=nx>distance</span><span class=o>:</span> <span class=nx>loc</span><span class=p>.</span><span class=nx>distance</span> <span class=o>/</span> <span class=mf>1000</span>
    <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=p>[</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Vaes Dothrak&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>54.16776</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-6.096125</span><span class=p>,</span>
    <span class=nt>&quot;distance&quot;</span><span class=p>:</span> <span class=mf>91.56658640314431</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Winterfell&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>54.368321</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-5.581312</span><span class=p>,</span>
    <span class=nt>&quot;distance&quot;</span><span class=p>:</span> <span class=mf>121.66399816395028</span>
  <span class=p>},</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Dragonstone&quot;</span><span class=p>,</span>
    <span class=nt>&quot;latitude&quot;</span><span class=p>:</span> <span class=mf>55.167801</span><span class=p>,</span>
    <span class=nt>&quot;longitude&quot;</span><span class=p>:</span> <span class=mf>-6.815096</span><span class=p>,</span>
    <span class=nt>&quot;distance&quot;</span><span class=p>:</span> <span class=mf>205.31879386198324</span>
  <span class=p>}</span>
<span class=p>]</span>
</code></pre></div> <p>The extra attribute, here called <em>distance</em>, is returned as part of the <em>loc</em> variable, as if it was part of the location document. The value is divided by 1000 in the example query, to convert the unit to kilometers, simply to make it better readable.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../introduction/ title=Introduction class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Introduction </div> </div> </a> <a href=../examples/ title="Additional Examples" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Additional Examples </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2017 - 2022 Macrometa Corp </div> </div> <div class=md-footer-social> <a href=https://github.com/macrometacorp target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/macrometa target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.linkedin.com/company/macrometa-corporation/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.568ba93b.min.js></script> <script src=../../assets/javascripts/bundle.2a81e305.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["tabs", "instant"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>